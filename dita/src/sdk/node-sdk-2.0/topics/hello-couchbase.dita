<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en-us" id="concept2677">
	<title>Hello Couchbase tutorial</title>
	<conbody>
		<p>To follow the tradition of programming tutorials, we’ll start with “Hello Couchbase”. This
			example works with the “beer-sample” bucket that is provided with the default install.</p>
		
<codeblock outputclass="language-javascript" spectitle="hello-couchbase.js">
var couchbase = require("couchbase");

var bucket = new couchbase.Connection({
  'bucket':'beer-sample',
  'host':'127.0.0.1:8091'
}, function(err) {
  if (err) {
    // Failed to make a connection to the Couchbase cluster.
    throw err;
  }

  bucket.get('aass_brewery-juleol', function(err, result) {
    if (err) {
      // Failed to retrieve key
      throw err;
    }

    var doc = result.value;

    console.log(doc.name + ', ABV: ' + doc.abv);

    doc.comment = "Random beer from Norway";

    bucket.replace('aass_brewery-juleol', doc, function(err, result) {
      if (err) {
        // Failed to replace key
        throw err;
      }

      console.log(result);

      // Success!
      process.exit(0);
    });
  });
});
</codeblock>
		
			<p>The
				following points explain each step in the example:</p>
		<ul>
				<li><i>Connecting</i>
			<p>A Connection object represents a connection to a single bucket within the
				cluster.</p><p>A bucket represents a logical namespace for a key. All keys must be
				unique within a single bucket, but multiple buckets can have keys with the same names
				and they will not conflict. A new connection object must be created for each bucket that
				you want to interact with in your application. This example creates one connection to
				the beer-sample bucket.</p><p>The constructor is passed the bucket name, which is
				beer-sample, and a node on the cluster to connect to. You can pass any node that is a
				member of the cluster. This example uses the local cluster instance.</p></li>
					
				<li><i>Retrieving Data</i>
			<p>The get method initiates an asynchronous request to retrieve the key requested. If
				the key exists, the callback will be invoked with a results object that contains the
				value of the key as well as any additional metadata returned from the cluster. To get
				the actual value of the object, you can access the result object’s value
				property.</p><p>If the key does not exist on the server, the callback will be invoked
				with an unset value property on the result object (it will not set the callbacks error
				parameter).</p></li>
					
				<li><i>Storing Data</i>
			<p>To store documents in the server, you can use one of the set family of methods.
				Here we use replace, which enforces the constraint that a previous value of the document
				must already exist. This can be thought of as an update operation in terms of CRUD
				(create, read, update, delete).</p><p>The storage methods also return a result object
					that contains metadata about the value that was stored.</p></li>
	</ul>
		
		<p>Now we’re ready to run our
				first Couchbase Program:</p>
		
		<codeblock>shell&gt; node hello-couchbase.js</codeblock>
		
	</conbody>
</concept>
