<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic xml:lang="en-us" id="topic3383">
	<title>Changing internal XDCR settings</title>
	<shortdesc>The XDCR advanced and internal settings change the replication behavior,
		performance, and timing.</shortdesc>
	<body>
		<p>The URI endpoints are available to change global settings for replications
			for a cluster and to change settings for a specific replication ID.
			
			<table frame="all"
				id="table_xdcr_settings_uri">
				<title>XDCR URI paths for settings</title>
				<tgroup cols="2">
					<colspec colname="c1" colnum="1" colwidth="1*"/>
					<colspec colname="c2" colnum="2" colwidth="1.35*"/>
					<thead>
						<row>
							<entry>URI path</entry>
							<entry>Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>/settings/replications/</entry>
							<entry>Global setting supplied to all replications for a cluster.</entry>
						</row>
						<row>
							<entry>/settings/replications/[replication_id]</entry>
							<entry>Settings for a specific replication for a bucket.</entry>
						</row>
						<row>
							<entry>/internalSettings</entry>
							<entry>Settings applied to all replications for a cluster.</entry>
						</row>
					</tbody>
				</tgroup>
			</table></p>
		
		<p>In the REST API you can change these
			settings globally for all replications for a cluster or for a specific replication ID. </p>
		<table frame="all"
			id="table_xdcr_settings">
			<title>XDCR advanced settings</title>
			<tgroup cols="3">
				<colspec colname="col1" colwidth="1.48*"/>
				<colspec colname="col2" colwidth="1*"/>
				<colspec colname="col3" colwidth="1.95*"/>
				<thead>
					<row>
						<entry>Parameter</entry>
						<entry>Value</entry>
						<entry>Description</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry><codeph>xdcrMaxConcurrentReps</codeph></entry>
						<entry>Integer from 1 to 32. Default: 16</entry>
						<entry>Same as Web Console setting <codeph>XDCR Max Replications per
								Bucket</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>workerProcesses</codeph></entry>
						<entry>Integer. Default: 4</entry>
						<entry>The number of worker processes for each vbucket replicator in XDCR. Setting is
							available for replications using either memcached or REST for
							replication. Same as Web Console setting <codeph>XDCR Workers per
								Replication</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>xdcrCheckpointInterval</codeph></entry>
						<entry>Integer</entry>
						<entry>Same as Web Console setting<codeph>XDCR Checkpoint
							Interval</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>xdcrWorkerBatchSize</codeph></entry>
						<entry>Integer</entry>
						<entry>Same as Web Console setting <codeph>XDCR Batch
							Count</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>xdcrDocBatchSizeKb</codeph></entry>
						<entry>Integer</entry>
						<entry>Same as Web Console setting <codeph>XDCR Batch Size
							(KB)</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>xdcrFailureRestartInterval</codeph></entry>
						<entry>Integer</entry>
						<entry>Same as Web Console setting<codeph>XDCR Failure Retry
								Interval</codeph>.</entry>
					</row>
					<row>
						<entry><codeph>xdcrOptimisticReplicationThreshold</codeph></entry>
						<entry>Integer</entry>
						<entry>Same as Web Console setting <codeph>XDCR Optimistic Replication
								Threshold</codeph>.</entry>
					</row>
				</tbody>
			</tgroup>
		</table>
		<p>The following settings are additional internal settings for XDCR that are only available
			via the REST API. </p>
		<table frame="all"
			id="table_xdcr_internal_settings">
			<title>XDCR internal settings</title>
			<tgroup cols="3">
				<colspec colname="col1" colwidth="1*"/>
				<colspec colname="col2" colwidth="1.08*"/>
				<colspec colname="col3" colwidth="1.68*"/>
				<thead>
					<row>
						<entry>Parameter</entry>
						<entry>Value</entry>
						<entry>Description</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry><codeph>httpConnections</codeph></entry>
						<entry>Integer from 1 to 100. Default 20.</entry>
						<entry>Number of maximum simultaneous HTTP connections used for REST
							protocol.</entry>
					</row>
				</tbody>
			</tgroup>
		</table>
		
		<p/>
		
		<section><title>GET /internalSettings </title>
			
			<p>Internal settings change replication behavior, performance, and timing. To retrieve the XDCR
				internal settings: </p>
			
			<codeblock>
// Syntax 
curl --username=ADMIN --password=PASSWORD HOST:PORT/internalSettings
				
// Example
curl -u Administrator:password 10.5.2.54:8091/internalSettings

// Results
{
"capiRequestLimit": "", 
"dropRequestMemoryThresholdMiB": "", 
"indexAwareRebalanceDisabled": false, 
"maxBucketCount": 10, 
"maxParallelIndexers": 4, 
"maxParallelReplicaIndexers": 2, 
"rebalanceIgnoreViewCompactions": false, 
"rebalanceIndexPausingDisabled": false, 
"rebalanceIndexWaitingDisabled": false, 
"rebalanceMovesBeforeCompaction": 64, 
"rebalanceMovesPerNode": 1, 
"restRequestLimit": "", 
"xdcrAnticipatoryDelay": 0, 
"xdcrCheckpointInterval": 1800, 
"xdcrDocBatchSizeKb": 2048, 
"xdcrFailureRestartInterval": 30, 
"xdcrMaxConcurrentReps": 32, 
"xdcrOptimisticReplicationThreshold": 256, 
"xdcrWorkerBatchSize": 500
}
			</codeblock>
			
			<p>To change the <uicontrol>xdcrMaxConcurrentReps</uicontrol> setting, which specifies the XDCR
				parallel replication streams per node:</p>
			
			<codeblock>
// Example
curl -X POST -u Administrator:password 10.5.2.54:8091/internalSettings -d xdcrMaxConcurrentReps=64

// Results
{
    ....
    "xdcrMaxConcurrentReps": 64, 
    "xdcrOptimisticReplicationThreshold": 256, 
    "xdcrWorkerBatchSize": 500
}
			</codeblock>
			
		</section>
			
			<section><title>GET /settings/replications</title>
				<p>To retrieve settings from /setting/replications:</p>
				
				<codeblock>
// Example
curl -u Administrator:password 10.5.2.54:8091/settings/replications

// Results
{
    "checkpointInterval": 1800, 
    "connectionTimeout": 180, 
    "docBatchSizeKb": 2048, 
    "failureRestartInterval": 30, 
    "httpConnections": 20, 
    "maxConcurrentReps": 16, 
    "optimisticReplicationThreshold": 256, 
    "pauseRequested": false, 
    "retriesPerRequest": 2, 
    "socketOptions": {
        "keepalive": true, 
        "nodelay": false
    }, 
    "supervisorMaxR": 25, 
    "supervisorMaxT": 5, 
    "workerBatchSize": 500, 
    "workerProcesses": 4
}
				</codeblock>

			</section>


		
		
		
		




	</body>

</topic>
