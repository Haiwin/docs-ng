<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="reference_rest_user">
	<title>User REST API</title>
	<shortdesc>A read-only user is created with the <codeph>/settings/readOnlyUser</codeph> URI endpont. Only
		one read-only user can be created.</shortdesc>
	<refbody>
		
		<section><title>Description</title>
		
		
		<table >
			<title>User endpoints</title>
			<tgroup cols="4">
				<colspec colname="col1" colwidth="1*"/>
				<colspec colname="col2" colwidth="1.78*"/>
				<colspec colname="col3" colwidth="2.39*"/>
				<colspec colname="col4" colwidth="1.72*"/>
				<thead>
					<row>
						<entry>HTTP method</entry>
						<entry>URI path</entry>
						<entry>Description</entry>
						<entry>Parameters</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>POST </entry>
						<entry>/settings/readOnlyUser</entry>
						<entry>Creates the read-only user</entry>
						<entry>username, password, just_validate</entry>
					</row>
					<row>
						<entry>PUT </entry>
						<entry>/settings/readOnlyUser</entry>
						<entry>Changes the  read-only user password</entry>
						<entry>password</entry>
					</row>
					<row>
						<entry>DELETE </entry>
						<entry>/settings/readOnlyUser</entry>
						<entry>Deletes the user</entry>
						<entry>none</entry>
					</row>
					<row>
						<entry>GET </entry>
						<entry>/settings/readOnlyAdminName</entry>
						<entry>Retrieves the read-only username</entry>
						<entry>none</entry>
					</row>
				</tbody>
			</tgroup>
		</table>

		
		<table>
			<title>User return codes</title>
			<tgroup cols="3">
				<colspec colname="col1" colwidth="1.22*"/>
				<colspec colname="col2" colwidth="1*"/>
				<colspec colname="col3" colwidth="3.23*"/>
				<thead>
					<row>
						<entry>Returns</entry>
						<entry>Errors</entry>
						<entry>Error description</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>success: 200 []</entry>
						<entry>error: 400</entry>
						<entry>{“errors”:{field_name:error_message}}</entry>
					</row>
					<row>
						<entry>success: 200 []</entry>
						<entry>error: 400</entry>
						<entry>{“errors”:{field_name:error_message}}</entry>
					</row>
					<row>
						<entry>success: 200 []</entry>
						<entry>error: 400</entry>
						<entry>{“errors”:{field_name:error_message}}</entry>
					</row>
					<row>
						<entry>success: 200 “username”</entry>
						<entry>not found: 404 </entry>
						<entry/>
					</row>
				</tbody>
			</tgroup>
		</table>
			
		</section>
		
		<section><title>POST /settings/readOnlyUser</title>
		
		
		<p>To create a read-only user, specify the username and password.</p>
			<note type="note">Administrative access is required to create a read-only user.</note>
			
		<codeblock>curl -X POST -u admin:password http://localhost:8091/settings/readOnlyUser -d username=a_name -d password=a_password 
</codeblock>
		<p>Replace the <i>admin</i>, <i>password</i>, <i>localhost</i>, <i>a_name</i>, and
			<i>a_password</i> values in the above example with your actual values.</p>

		<p>The endpoint has one additional, optional parameter <codeph>just_validate=1</codeph>. If this
				parameter is specified, the server does not create the user instead the username and
				password for the read-only user is validated.</p>
		
			<note type="note">A <codeph>username</codeph> is a UTF–8 string that does not contain spaces, control
				characters or any of these characters: ()&lt;&gt;@,;:\"/[]?={} characters. Any
				<codeph>password</codeph> must be UTF–8 with no control characters and must be at
				least six characters long. </note>
			
		</section>
		
		<section><title>PUT /settings/readOnlyUser</title>
			
		<p>To change the password for a read-only user, specify the user name and the new password:</p>
		<codeblock>curl -X PUT -u admin:password http://localhost:8091/settings/readOnlyUser -d username=a_name -d password=new_password
</codeblock>
		</section>
		
		<section><title>DELETE /settings/readOnlyUser</title>
		<p>To delete the user:</p>
		<codeblock>curl -X DELETE -u admin:password http://localhost:8091/settings/readOnlyUser 
</codeblock>
		</section>
		
		<section><title>GET /settings/readOnlyAdminName</title>
		
		<p>To retrieve the read-only username, administrative or read-only permissions are required:</p>
		<codeblock>curl -u username:password  http://localhost:8091/settings/readOnlyAdminName
</codeblock>
		<p>Replace the <i>admin</i>, <i>password</i>, <i>localhost</i>, <i>username</i>,
				<i>a_name</i>, and <i>new_password</i> values in the above examples with your actual
			values.</p>
		<p>This returns a response with the read-only username as payload, <codeph>success: 200 |
				"username"</codeph>. If there is no read-only user, the following error <codeph>not
				found: 404</codeph> is returned.</p>
		</section>
	</refbody>
</reference>
