<?xml version="1.0" encoding="utf-8"?><?workdir /Users/Ruth/forks/docs-ng/dita/src/ag3/temp/pdf/ag3/Views?><?workdir-uri file:/Users/Ruth/forks/docs-ng/dita/src/ag3/temp/pdf/ag3/views/?><?path2project ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" xml:lang="en-us" id="topic21758" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)    " class="- topic/topic " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="topic:1;4:41">
   <title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:1;5:11">Querying views</title>
   <body class="- topic/body " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="body:1;6:10">
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:1;7:10">In order to query a view, the view definition must include a suitable map function that
         uses the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:1;8:27">emit()</codeph> function to generate each row of information. The content
         of the key that is generated by the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:2;9:54">emit()</codeph> provides the information on
         which you can select the data from your view.</p>
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:2;11:10">The key can be used when querying a view as the selection mechanism, either by using
         an:</p>
      <ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:1;13:11">
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:1;14:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:3;14:17"><i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:1;14:20">explicit key</i> — show all the records matching the exact structure of the
               supplied key.</p></li>
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:2;16:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:4;16:17"><i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:2;16:20">list of keys</i> — show all the records matching the exact structure of each of
               the supplied keys (effectively showing keya or keyb or keyc).</p></li>
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:3;18:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:5;18:17"><i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:3;18:20">range of keys</i> — show all the records starting with keya and stopping on the
               last instance of keyb.</p></li>
      </ul>
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:6;21:10">When querying the view results, a number of parameters can be used to select, limit, order
         and otherwise control the execution of the view and the information that is returned.</p>
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:7;23:10">When a view is accessed without specifying any parameters, the view will produce results
         matching the following:</p>
      <ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:2;25:11">
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:4;26:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:8;26:17">Full view specification, i.e. all documents are potentially output according to the
               view definition.</p></li>
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:5;28:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:9;28:17">Limited to 10 items within the Admin Console, unlimited through the REST
            API.</p></li>
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:6;30:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:10;30:17">Reduce function used if defined in the view.</p></li>
         <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:7;31:14"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:11;31:17">Items sorted in ascending order (using UTF–8 comparison for strings, natural number
               order)</p></li>
      </ul>
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:12;34:10">View results and the parameters operate and interact in a specific order. The interaction
         directly affects how queries are written and data is selected.</p>
      
      <fig class="- topic/fig " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="fig:1;37:12">
            <image href="../images/views-query-flow.png" width="480" placement="inline" class="- topic/image " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="image:1;38:70">
               <alt class="- topic/alt " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="alt:1;39:22"/>
            </image>
         </fig>
      
      <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:13;43:10">The core arguments and selection systems are the same through both the REST API interface,
         and the client libraries. The setting of these values differs between different client
         libraries, but the argument names and expected and supported values are the same across all
         environments.</p>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:1;50:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:2;50:23">Querying using the REST API</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:14;50:61">Querying can be performed through the
            REST API endpoint. The REST API supports and operates using the core HTTP protocol, and
            this is the same system used by the client libraries to obtain the view data.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:2;56:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:3;56:23">Selecting information</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:15;56:55">Couchbase Server supports a number of
            mechanisms for selecting information returned by the view. Key selection is made after
            the view results (including the reduction function) are executed, and after the items in
            the view output have been sorted.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:16;59:53">When specifying keys to the selection mechanism,
            the key must be expressed in the form of a JSON value. For example, when specifying a
            single key, a string must be quoted (“string”).</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:17;61:67">When specifying the key selection
            through a parameter, the keys must match the format of the keys emitted by the view.
            Compound keys, for example where an array or hash has been used in the emitted key
            structure, the supplied selection value should also be an array or a hash.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:18;64:94">The
            following selection types are supported:</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:3;65:61">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:8;66:17"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="b:1;66:20">Explicit Key</b></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:19;67:18">An explicit key can be specified using the parameter <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:3;67:79">key</codeph>. The view
            query will only return results where the key in the view output, and the value supplied
            to the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:4;69:28">key</codeph> parameter match identically.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:20;69:76">For example, if you
            supply the value “tomato” only records matching <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:4;70:64">exactly</i> “tomato” will be selected
            and returned. Keys with values such as “tomatoes” will not be returned.</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:4;71:92">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:9;72:17"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="b:2;72:20">Key List</b></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:21;73:18">A list of keys to be output can be specified by supplying an array of values using
            the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:5;74:25">keys</codeph> parameter. In this instance, each item in the specified array
            will be used as explicit match to the view result key, with each array value being
            combined with a logical <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:6;76:45">or</codeph>.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:22;76:64">For example, if the value specified
            to the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:7;77:28">keys</codeph> parameter was <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:8;77:64">["tomato","avocado"]</codeph>, then
            all results with a key of ‘tomato’ <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:5;78:51">or</i> ‘avocado’ will be returned.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:23;78:92">When
            using this query option, the output results are not sorted by key. This is because key
            sorting of these values would require collating and sorting all the rows before
            returning the requested information.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:24;81:56">In the event of using a compound key, each
            compound key must be specified in the query. For example:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:1;82:85"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:9;82:93">```
keys=[["tomato",20],["avocado",20]]
```
</codeph></codeblock><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:5;85:26">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:10;86:17"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="b:3;86:20">Key Range</b></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:25;87:18">A key range, consisting of a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:10;87:55">startkey</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:11;87:85">endkey</codeph>.
            These options can be used individually, or together, as
            follows:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:2;89:36"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:12;89:44">* `startkey` only

  Output does not start until the first occurrence of `startkey`, or a value
  greater than the specified value, is seen. Output will then continue until the
  end of the view.

* `endkey` only

  Output starts with the first view result, and continues until the last
  occurrence of `endkey`, or until the emitted value is greater than the computed
  lexical value of `endkey`.

* `startkey` and `endkey`

  Output of values does not start until `startkey` is seen, and stops when the
  last occurrence of `endkey` is identified.
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:26;105:25">When
            using <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:13;106:27">endkey</codeph>, the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:14;106:56">inclusive_end</codeph> option specifies
            whether output stops after the last occurrence of the specified <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:15;107:85">endkey</codeph>
            (the default). If set to false, output stops on the last result before the specified
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:16;109:24">endkey</codeph> is seen.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:27;109:55">The matching algorithm works on partial
            values, which can be used to an advantage when searching for ranges of keys.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:3;114:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:4;114:23">Selecting compound information by key or keys</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:28;114:79">If you are generating
            a compound key within your view, for example when outputting a date split into
            individually year, month, day elements, then the selection value must exactly match the
            format and size of your compound key. The value of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:17;117:72">key</codeph> or
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:18;118:24">keys</codeph> must exactly match the output key structure.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:29;118:89">For example,
            with the view
            data:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:3;120:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:19;120:41">{"total_rows":5693,"rows":[
{"id":"1310653019.12667","key":[2011,7,14,14,16,59],"value":null},
{"id":"1310662045.29534","key":[2011,7,14,16,47,25],"value":null},
{"id":"1310668923.16667","key":[2011,7,14,18,42,3],"value":null},
{"id":"1310675373.9877","key":[2011,7,14,20,29,33],"value":null},
{"id":"1310684917.60772","key":[2011,7,14,23,8,37],"value":null},
{"id":"1310693478.30841","key":[2011,7,15,1,31,18],"value":null},
{"id":"1310694625.02857","key":[2011,7,15,1,50,25],"value":null},
{"id":"1310705375.53361","key":[2011,7,15,4,49,35],"value":null},
{"id":"1310715999.09958","key":[2011,7,15,7,46,39],"value":null},
{"id":"1310716023.73212","key":[2011,7,15,7,47,3],"value":null}
]
}
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:30;133:25">Using
            the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:20;134:25">key</codeph> selection mechanism you must specify the entire key value,
            i.e.:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:4;135:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:21;135:41">?key=[2011,7,15,7,47,3]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:31;136:25">If you
            specify a value, such as only the
            date:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:5;138:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:22;138:41">?key=[2011,7,15]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:32;139:25">The view will
            return no records, since there is no exact key match. Instead, you must use a range that
            encompasses the information range you want to
            output:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:6;142:35"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:23;142:43">?startkey=[2011,7,15,0,0,0]&amp;endkey=[2011,7,15,99,99,99]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:33;143:25">This
            will output all records within the specified range for the specified date. </p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:4;148:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:5;148:23">Partial selection and key ranges</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:34;148:66">Matching of the key value has a
            precedence from right to left for the key value and the supplied
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:24;150:24">startkey</codeph> and/or <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:25;150:57">endkey</codeph>. Partial strings may
            therefore be specified and return specific information.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:35;151:75">For example, given the
            view
            data:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:7;153:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:26;153:41">"a",
 "aa",
 "bb",
 "bbb",
 "c",
 "cc",
 "ccc"
 "dddd"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:36;161:25">Specifying
            a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:27;162:23">startkey</codeph> parameter with the value “aa” will return the last seven
            records, including
            “aa”:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:8;164:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:28;164:41">"aa",
 "bb",
 "bbb",
 "c",
 "cc",
 "ccc",
 "dddd"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:37;171:25">Specifying
            a partial string to <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:29;172:41">startkey</codeph> will trigger output of the selected values
            as soon as the first value or value greater than the specified value is identified. For
            strings, this partial match (from left to right) is identified. For example, specifying
            a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:30;175:23">startkey</codeph> of “d” will
            return:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:9;176:35"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:31;176:43">"dddd"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:38;177:25">This is because the first
            match is identified as soon as the a key from a view row matches the supplied
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:32;179:24">startkey</codeph> value <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:6;179:51">from left to right</i>. The supplied single
            character matches the first character of the view output.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:39;180:77">When comparing larger
            strings and compound values the same matching algorithm is used. For example, searching
            a database of ingredients and specifying a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:33;182:64">startkey</codeph> of “almond” will
            return all the ingredients, including “almond”, “almonds”, and “almond
            essence”.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:40;184:29">To match all of the records for a given word or value across the entire
            range, you can use the null value in the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:34;185:62">endkey</codeph> parameter. For example,
            to search for all records that start only with the word “almond”, you specify a
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:35;187:24">startkey</codeph> of “almond”, and an endkey of “almond\u02ad” (i.e. with the
            last Latin character at the end). If you are using Unicode strings, you may want to use
            “\uefff”.</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:10;189:37"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:36;189:45">startkey="almond"&amp;endkey="almond\u02ad"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:41;190:25">The
            precedence in this example is that output starts when ‘almond’ is seen, and stops when
            the emitted data is lexically greater than the supplied <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:37;192:77">endkey</codeph>.
            Although a record with the value “almond\02ad” will never be seen, the emitted data will
            eventually be lexically greater than “almond\02ad” and output will stop.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:42;194:92">In
            effect, a range specified in this way acts as a prefix with all the data being output
            that match the specified
            prefix.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:5;201:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:6;201:23">Partial selection with compound keys</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:43;201:70">Compound keys, such as arrays
            or hashes, can also be specified in the view output, and the matching precedence can be
            used to provide complex selection ranges. For example, if time data is emitted in the
            following
            format:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:11;205:35"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:38;205:43">[year,month,day,hour,minute]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:44;206:25">Then
            precise date (and time) ranges can be selected by specifying the date and time in the
            generated data. For example, to get information between 1st April 2011, 00:00 and 30th
            September 2011,
            23:59:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:12;210:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:39;210:42">?startkey=[2011,4,1,0,0]&amp;endkey=[2011,9,30,23,59]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:45;211:25">The
            flexible structure and nature of the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:40;212:58">startkey</codeph> and
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:41;213:24">endkey</codeph> values enable selection through a variety of range
            specifications. For example, you can obtain all of the data from the beginning of the
            year until the 5th March
            using:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:13;216:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:42;216:42">?startkey=[2011]&amp;endkey=[2011,3,5,23,59]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:46;217:25">You
            can also examine data from a specific date through to the end of the
            month:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:14;219:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:43;219:42">?startkey=[2011,3,16]&amp;endkey=[2011,3,99]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:47;220:25">In
            the above example, the value for the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:44;221:58">day</codeph> element of the array is an
            impossible value, but the matching algorithm will identify when the emitted value is
            lexically greater than the supplied <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:45;223:57">endkey</codeph> value, and information
            selected for output will be stopped.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:48;224:56">A limitation of this structure is that it is
            not possible to ignore the earlier array values. For example, to select information from
            10am to 2pm each day, you cannot use this parameter
            set:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:15;227:32"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:46;227:40">?startkey=[null,null,null,10,0]&amp;endkey=[null,null,null,14,0]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:49;228:25">In
            addition, because selection is made by a outputting a range of values based on the start
            and end key, you cannot specify range values for the date portion of the
            query:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:16;231:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:47;231:42">?startkey=[0,0,0,10,0]&amp;endkey=[9999,99,99,14,0]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:50;232:25">This
            will instead output all the values from the first day at 10am to the last day at
            2pm.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:6;238:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:7;238:23">Pagination</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:51;238:44">Pagination over results can be achieved by using the
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:48;239:24">skip</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:49;239:50">limit</codeph> parameters. For example, to get the
            first 10 records from the
            view:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:17;241:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:50;241:41">?limit=10
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:52;242:25">The next ten records can
            obtained by
            specifying:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:18;244:39"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:51;244:47">?skip=10&amp;limit=10
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:53;245:25">On the
            server, the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:52;246:33">skip</codeph> option works by executing the query and literally
            iterating over the specified number of output records specified by
            <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:53;248:21">skip</codeph>, then returning the remainder of the data up until the specified
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:54;249:24">limit</codeph> records are reached, if the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:55;249:75">limit</codeph> parameter
            is specified.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:54;250:33">When paginating with larger values for <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:56;250:80">skip</codeph>, the
            overhead for iterating over the records can be significant. A better solution is to
            track the document id output by the first query (with the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:57;252:79">limit</codeph>
            parameter). You can then use <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:58;253:50">startkey_docid</codeph> to specify the last
            document ID seen, skip over that record, and output the next ten
            records.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:55;255:28">Therefore, the paging sequence is, for the first
            query:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:19;256:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:59;256:42">?startkey="carrots"&amp;limit=10
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:56;257:25">Record
            the last document ID in the generated output, then
            use:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:20;259:32"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:60;259:40">?startkey="carrots"&amp;startkey_docid=DOCID&amp;skip=1&amp;limit=10
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:57;260:25">When
            using <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:61;261:27">startkey_docid</codeph> you must specify the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:62;261:80">startkey</codeph>
            parameter to specify the information being searched for. By using the
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:63;263:24">startkey_docid</codeph> parameter, Couchbase Server skips through the B-Tree
            index to the specified document ID. This is much faster than the skip/limit example
            shown
            above.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:7;270:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:8;270:23">Grouping in queries</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:58;270:53">If you have specified an array as your compound
            key within your view, then you can specify the group level to be applied to the query
            output when using a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:64;272:41">reduce()</codeph>.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:59;272:66">When grouping is enabled, the view
            output is grouped according to the key array, and you can specify the level within the
            defined array that the information is grouped by. You do this by specifying the index
            within the array by which you want the output grouped using the
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:65;276:24">group_level</codeph> parameter.</p>
         
         <fig class="- topic/fig " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="fig:2;278:15">
            <image href="../images/views-grouping.png" width="480" placement="inline" class="- topic/image " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="image:2;279:68">
                  <alt class="- topic/alt " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="alt:2;280:25"/>
               </image>
            </fig>
         
         <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:60;284:13">The <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:66;284:25">group_level</codeph> parameter specifies the
            array index (starting at 1) at which you want the grouping occur, and generate a unique
            value based on this value that is used to identify all the items in the view output that
            include this unique value:</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:6;287:47">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:11;288:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:61;288:20">A group level of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:67;288:45">0</codeph> groups by the entire dataset (as if no array
                  exists).</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:12;290:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:62;290:20">A group level of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:68;290:45">1</codeph> groups the content by the unique value of the
                  first element in the view key array. For example, when outputting a date split by
                  year, month, day, hour, minute, each unique year will be output.</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:13;293:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:63;293:20">A group level of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:69;293:45">2</codeph> groups the content by the unique value of the
                  first and second elements in the array. With a date, this outputs each unique year
                  and month, including all records with that year and month into each
               group.</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:14;297:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:64;297:20">A group level of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:70;297:45">3</codeph> groups the content by the unique value of the
                  first three elements of the view key array. In a date this outputs each unique
                  date (year, month, day) grouping all items according to these first three
                  elements.</p></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:65;301:18">The grouping will work for any output structure where you have output an compound
            key using an array as the output value for the
            key.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:8;307:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:9;307:23">Selection when grouping</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:66;307:57">When using grouping and selection using the
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:71;308:24">key</codeph>, <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:72;308:46">keys</codeph>, or <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:73;308:72">startkey</codeph> /
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:74;309:24">endkey</codeph> parameters, the query value should match at least the format
            (and element count) of the group level that is being queried.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:67;310:81">For example, using
            the following <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:75;311:35">map()</codeph> function to output information by date as an
            array:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:21;312:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:76;312:42">function(doc, meta)
{
  emit([doc.year, doc.mon, doc.day], doc.logtype);
}
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:68;316:25">If
            you specify a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:77;317:35">group_level</codeph> of <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:78;317:67">2</codeph> then you must specify a
            key using at least the year and month information. For example, you can specify an
            explicit key, such as <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:79;319:43">[2012,8]</codeph>
            :</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:22;320:29"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:80;320:37">?group=true&amp;group_level=2&amp;key=[2012,8]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:69;321:25">You
            can query it for a
            range:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:23;323:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:81;323:42">?group=true&amp;group_level=2&amp;startkey=[2012,2]&amp;endkey=[2012,8]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:70;324:25">You
            can also specify a year, month and day, while still grouping at a higher level. For
            example, to group by year/month while selecting by specific
            dates:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:24;327:34"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:82;327:42">?group=true&amp;group_level=2&amp;startkey=[2012,2,15]&amp;endkey=[2012,8,10]
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:71;328:25">Specifying
            compound keys that are shorter than the specified group level may output unexpected
            results due to the selection mechanism and the way <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:83;330:72">startkey</codeph> and
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:84;331:24">endkey</codeph> are used to start and stop the selection of output
            rows.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:9;336:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:10;336:23">Ordering</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:72;336:42">All view results are automatically output sorted, with the
            sorting based on the content of the key in the output view. Views are sorted using a
            specific sorting format, with the basic order for all basic and compound follows as
            follows:</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:7;339:29">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:15;340:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:73;340:20"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:85;340:28">null</codeph></p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:16;341:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:74;341:20"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:86;341:28">false</codeph></p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:17;342:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:75;342:20"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:87;342:28">true</codeph></p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:18;343:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:76;343:20">Numbers</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:19;344:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:77;344:20">Text (case sensitive, lowercase first, UTF–8 order)</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:20;345:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:78;345:20">Arrays (according to the values of each element, in order)</p></li>
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:21;346:17"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:79;346:20">Objects (according to the values of keys, in key order)</p></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:80;347:18">The natural sorting is therefore by default close to natural sorting order both
            alphabetically (A-Z) and numerically (0–9).</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:81;348:63">There is no collation or foreign
            language support. Sorting is always according to the above rules based on UTF–8
            values.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:82;350:27">You can alter the direction of the sorting (reverse, highest to lowest
            numerically, Z-A alphabetically) by using the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:88;351:67">descending</codeph> option. When
            set to true, this reverses the order of the view results, ordered by their
            key.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:83;353:24">Because selection is made after sorting the view results, if you configure
            the results to be sorted in descending order and you are selecting information using a
            key range, then you must also reverse the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:89;355:63">startkey</codeph> and
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:90;356:24">endkey</codeph> parameters. For example, if you query ingredients where the
            start key is ‘tomato’ and the end key is ‘zucchini’, for
            example:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:25;358:36"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:91;358:44">?startkey="tomato"&amp;endkey="zucchini"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:84;359:25">The
            selection will operate, returning information when the first key matches ‘tomato’ and
            stopping on the last key that matches ‘zucchini’.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:85;361:69">If the return order is
            reversed:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:26;362:37"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:92;362:45">?descending=true&amp;startkey="tomato"&amp;endkey="zucchini"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:86;363:25">The
            query will return only entries matching ‘tomato’. This is because the order will be
            reversed, ‘zucchini’ will appear first, and it is only when the results contain ‘tomato’
            that any information is returned.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:87;366:53">To get all the entries that match, the
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:93;367:24">startkey</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:94;367:54">endkey</codeph> values must also be
            reversed:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:27;368:37"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:95;368:45">?descending=true&amp;startkey="zucchini"&amp;endkey="tomato"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:88;369:25">The
            above selection will start generating results when ‘zucchini’ is identified in the key,
            and stop returning results when ‘tomato’ is identified in the key.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:89;371:86">View output and
            selection are case sensitive. Specifying the key ‘Apple’ will not return ‘apple’ or
            ‘APPLE’ or other case differences. Normalizing the view output and query input to all
            lowercase or upper case will simplify the process by eliminating the case
            differences.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:10;379:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:11;379:23">Understanding letter ordering in views</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:90;379:72">Couchbase Server uses a
            Unicode collation algorithm to order letters, so you should be aware of how this
            functions. Most developers are typically used to Byte order, such as that found in ASCII
            and which is used in most programming languages for ordering strings during string
            comparisons.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:91;383:32">The following shows the order of precedence used in Byte order, such
            as ASCII:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:28;384:37"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:96;384:45">123456890 &lt; A-Z &lt; a-z
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:92;385:25">This
            means any items that start with integers will appear before any items with letters; any
            items that beginning with capital letters will appear before items in lower case
            letters. This means the item named “Apple” will appear before “apple” and the item
            “Zebra” will appear before “apple”. Compare this with the order of precedence used in
            Unicode collation, which is used in Couchbase
            Server:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:29;391:35"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:97;391:43">123456790 &lt; aAbBcCdDeEfFgGhH...
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:93;392:25">Notice
            again that items that start with integers will appear before any items with letters.
            However, in this case, the lowercase and then uppercase of the same letter are grouped
            together. This means that that if “apple” will appear before “Apple” and would also
            appear before “Zebra.” In addition, be aware that with accented characters will follow
            this
            ordering:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:30;398:37"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:98;398:45">a &lt; á &lt; A &lt; Á &lt; b
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:94;399:25">This
            means that all items starting with “a” <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:7;400:55">and accented variants of the letter</i> will
            occur before “A” and any accented variants of “A.”</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:95;401:70"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="b:4;401:73">Ordering
            Example</b></p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:96;402:31">In Byte order, keys in an index would appear as
            follows:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:31;403:36"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:99;403:44">"ABC123" &lt; "ABC223" &lt; "abc123" &lt; "abc223" &lt; "abcd23" &lt; "bbc123" &lt; "bbcd23"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:97;404:25">The
            same items will be ordered this way by Couchbase Server under Unicode
            collation:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:32;406:38"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:100;406:46">"abc123" &lt; "ABC123" &lt; "abc223" &lt; "ABC223" &lt; "abcd23" &lt; "bbc123" &lt; "bbcd23"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:98;407:25">This
            is particularly important for you to understand if you query Couchbase Server with a
               <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:101;409:24">startkey</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:102;409:54">endkey</codeph> to get back a range of results.
            The items you would retrieve under Byte order are different compared to Unicode
            collation. </p>
         
         <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:99;413:13"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="b:5;413:16">Ordering and Query Example</b></p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:100;413:53">This
            following example demonstrates Unicode collation in Couchbase Server and the impact on
            query results returned with a <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:103;415:51">startkey</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:104;415:81">endkey</codeph>. It
            is based on the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:105;416:37">beer-sample</codeph> database provided with Couchbase Server.
            </p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:101;417:20">Imagine you want to retrieve all breweries with names starting
            with uppercase Y. Your query parameters would appear as
            follows:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:33;419:36"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:106;419:44">startkey="Y"&amp;endkey="z"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:102;420:25">If
            you want breweries starting with lowercase y <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="i:8;421:61">or</i> uppercase Y, you would provides a
            query as
            follows:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:34;423:36"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:107;423:44">startkey="y"&amp;endkey="z"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:103;424:25">This
            will return all names with lower case Y and items up to, but not including lowercase z,
            thereby including uppercase Y as well. To retrieve the names of breweries starting with
            lowercase y only, you would terminate your range with capital
            Y:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:35;428:30"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:108;428:38">startkey="y"&amp;endkey="Y"
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:104;429:25">As it
            happens, the sample database does not contain any results because there are no beers in
            it which start with lowercase <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:109;431:51">y</codeph>.</p></section>
      
      
      
      <section class="- topic/section " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="section:11;435:16"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="title:12;435:23">Error control</title><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:105;435:47">There are a number of parameters that can be used to
            help control errors and responses during a view query.</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="ul:8;436:75">
            <li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="li:22;437:17"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:110;437:25">on_error</codeph></li>
         </ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:106;438:18">The <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:111;438:30">on_error</codeph> parameter specifies whether the view results will be
            terminated on the first error from a node, or whether individual nodes can fail and
            other nodes return information.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:107;440:51">When returning the information generated by a view
            request, the default response is for any raised error to be included as part of the JSON
            response, but for the view process to continue. This allows for individual nodes within
            the Couchbase cluster to timeout or fail, while still generating the requested view
            information.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:108;444:32">In this instance, the error is included as part of the JSON
            returned:</p>
         
         <codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:36;447:21">
{
   "errors" : [
      {
         "from" : "http://192.168.1.80:9503/_view_merge/?stale=false",
         "reason" : "req_timedout"
      },
      {
         "from" : "http://192.168.1.80:9502/_view_merge/?stale=false",
         "reason" : "req_timedout"
      },
      {
         "from" : "http://192.168.1.80:9501/_view_merge/?stale=false",
         "reason" : "req_timedout"
      }
   ],
   "rows" : [
      {
         "value" : 333280,
         "key" : null
      }
   ]
}
</codeblock>
         <p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="p:109;471:13">You
            can alter this behavior by using the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:112;472:58">on_error</codeph> argument. The default
            value is <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:113;473:30">continue</codeph>. If you set this value to <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:114;473:82">stop</codeph> then
            the view response will cease the moment an error occurs. The returned JSON will contain
            the error information for the node that returned the first error. For
         example:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeblock:37;476:33"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="codeph:115;476:41">```
{
   "errors" : [
      {
         "from" : "http://192.168.1.80:9501/_view_merge/?stale=false",
         "reason" : "req_timedout"
      }
   ],
   "rows" : [
      {
         "value" : 333280,
         "key" : null
      }
   ]
}
```
</codeph></codeblock></section>
      
      
      
   </body>
   <related-links class="- topic/related-links " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="related-links:1;497:19"><linkpool class="- topic/linkpool " xtrc="topicref:111;128:47" xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/Admin.ditamap"><link class="- topic/link " mapclass="- map/topicref " type="topic" xtrc="topicref:103;120:42" xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/Admin.ditamap" href="../Views/views-intro.dita" role="parent"><?ditaot usertext?><linktext class="- topic/linktext "><?ditaot gentext?>Views and indexes</linktext></link></linkpool>
      <linklist class="- topic/linklist " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="linklist:1;498:17">
         <link href="../views/views-writing.dita" class="- topic/link " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="link:1;499:52" type="topic"><?ditaot gentext?><linktext class="- topic/linktext ">Writing views</linktext></link>
         <link href="../views/views-querySample.dita" class="- topic/link " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="link:2;500:56" type="topic"><?ditaot gentext?><linktext class="- topic/linktext ">View and query pattern samples</linktext></link>
         <link href="../REST/rest-views-intro.dita" class="- topic/link " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="link:3;501:53" type="topic"><?ditaot gentext?><linktext class="- topic/linktext ">Views REST API</linktext></link>
         <link href="http://www.unicode.org/reports/tr10/" scope="external" format="html" class="- topic/link " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="link:4;502:91"><?ditaot usertext?><linktext class="- topic/linktext " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="linktext:1;503:23">Unicode Technical Standard #10</linktext></link>
         <link href="http://userguide.icu-project.org/collation/customization#TOC-Default-Options/" scope="external" format="html" class="- topic/link " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="link:5;506:44"><?ditaot usertext?><linktext class="- topic/linktext " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/views/views-querying.dita" xtrc="linktext:2;507:23">ICU User Guide, Customization, Default Options</linktext></link>
      </linklist>
   </related-links>
</topic>