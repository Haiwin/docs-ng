<?xml version="1.0" encoding="utf-8"?><?workdir /Users/Ruth/forks/docs-ng/dita/src/ag3/temp/pdf/oxygen_dita_temp/REST?><?workdir-uri file:/Users/Ruth/forks/docs-ng/dita/src/ag3/temp/pdf/oxygen_dita_temp/REST/?><?path2project ../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" xml:lang="en-us" id="topic2065" ditaarch:DITAArchVersion="1.2" domains="(topic hi-d)                             (topic ut-d)                             (topic indexing-d)                            (topic hazard-d)                            (topic abbrev-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)    " class="- topic/topic " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="topic:1;4:40"><title class="- topic/title " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="title:1;4:47">Limiting simultaneous node requests</title><body class="- topic/body " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="body:1;4:96"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:1;4:99">You can use the <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="codeph:1;4:123">/internalSettings</codeph> endpoint to limit the
number of simultaneous requests each node can accept. In earlier releases, too
many simultaneous views requests resulted in a node being overwhelmed. For
general information about this endpoint, see <xref href="#topic2065/couchbase-admin-restapi-settings-max_bucket_count" class="- topic/xref " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="xref:1;7:120"><?ditaot usertext?>Managing Internal Cluster
Settings</xref>.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:2;8:24"> When Couchbase Server rejects an incoming connection because one of these
limits is exceeded, it responds with an HTTP status code of 503. The HTTP
Retry-After header will be set appropriately. If the request is made to a REST
port, the response body will provide the reason why the request was rejected. If
the request is made on a CAPI port, such as a views request, the server will
respond with a JSON object with a “error” and “reason” fields.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:3;13:70">For example, to change this limit for the port used for views:</p><codeblock xml:space="preserve" class="+ topic/pre pr-d/codeblock " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="codeblock:1;13:147"><codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="codeph:2;13:155">curl -X POST -u admin:password http://localhost:8091/internalSettings -d 'capiRequestLimit=50'
</codeph></codeblock><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:4;14:25">Replace the <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="i:1;14:40">admin</i>, <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="i:2;14:54">password</i>, <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="i:3;14:71">localhost</i>, and <i class="+ topic/ph hi-d/i " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="i:4;14:93">50</i> values in the above
example with your actual values.</p><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:5;15:40">Will limit the number of simultaneous views requests and internal XDCR requests
which can be made on a port. The following are all the port-related request
parameters you can set:</p><ul class="- topic/ul " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="ul:1;17:32">
<li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="li:1;18:5"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:6;18:8"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="b:1;18:11">restRequestLimit</b> : Maximum number of simultaneous connections each node
 should accept on a REST port. Diagnostic-related requests and 
 <codeph class="+ topic/ph pr-d/codeph " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="codeph:3;20:10">/internalSettings</codeph> requests are not counted in this limit.</p></li>
<li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="li:2;21:5"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:7;21:8"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="b:2;21:11">capiRequestLimit</b> : Maximum number of simultaneous connections each node
 should accept on CAPI port. This port is used for XDCR and views connections.</p></li>
<li class="- topic/li " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="li:3;23:5"><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:8;23:8"><b class="+ topic/ph hi-d/b " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="b:3;23:11">dropRequestMemoryThresholdMiB</b> : In MB. The amount of memory used by Erlang
 VM that should not be exceeded. If the amount is exceeded the server will start
 dropping incoming connections.</p></li>
</ul><p class="- topic/p " xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST/rest-views-requests.dita" xtrc="p:9;26:9">By default these settings do not have any limit set. We recommend you leave this
settings at the default setting unless you experience issues with too many
requests impacting a node. If you set these thresholds too low, too many
requests will be rejected by the server, including requests from Couchbase Web
Console.</p></body><related-links class="- topic/related-links "><linkpool class="- topic/linkpool " xtrc="topicref:43;51:51" xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST.ditamap"><link class="- topic/link " mapclass="- map/topicref " type="topic" xtrc="topicref:40;48:46" xtrf="/Users/Ruth/forks/docs-ng/dita/src/ag3/REST.ditamap" href="../REST/rest-views-intro.dita" role="parent"><?ditaot usertext?><linktext class="- topic/linktext "><?ditaot gentext?>Views REST API</linktext></link></linkpool></related-links>
</topic>