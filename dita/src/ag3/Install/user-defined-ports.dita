<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic xml:lang="en-us" id="topic2033">
  <title>Using user-defined ports</title>
  <body>
    <p>This section describes how to install and run Couchbase server with user-defined ports rather
      than with the default 8091 port.</p>
    <p>To run Couchbase server on user-defined ports, ensure that the minimum RAM and CPU are
      available for the Couchbase instance. For information about Red Hat Linux installation, see
      http://docs.couchbase.com/couchbase-manualâ€“2.5/cb-install/#red-hat-linux-installation. </p>
        <note type="note">Refer to the reserved network ports before creating user-defined ports. </note>
    <section><title>Setting up Couchbase with user-defined ports</title>
    <ol>
      <li>Install Couchbase. <ul>
          <li>If Couchbase is already installed and running, stop the Couchbase server.</li>
        </ul></li>
      <li>Add the new user-defined ports to the <b>/opt/couchbase/etc/couchbase/static_config</b>
        file. <ul>
          <li>The /opt/couchbase/etc/couchbase/static_config file is where Couchbase picks up the
            configuration parameters from.</li>
          <li>If port numbers are not specified, default ports are used.</li>
          <li>To override some or all default ports, append the user-defined ports to the file.</li>
        </ul></li>
      <li>(Optional) CAPI port (default 8092) can be edited in the
          <b>/opt/couchbase/etc/couchdb/default.d/capi.ini</b> file by replacing 8092 with the new
        port name.</li>
      <li>If the Couchbase server was previously configured, delete the
          <b>opt/couchbase/var/lib/couchbase/config/config.dat</b> file to remove the old
        configuration.</li>
      <li>Start the Couchbase server</li>
    </ol>
    </section>
    
    <section><title>Ports to change</title>
      
    <p>The following are the user-defined ports to add, replace, or append to the
        <b>/opt/couchbase/etc/couchbase/static_config</b> file. </p>
    <codeblock>
{rest_port, 9000}.                                   
{mccouch_port, 8999}.                         
{memcached_port, 12000}.
{memcached_dedicated_port, 11999}.
{moxi_port, 12001}.
{short_name, "ns_1"}.
{ssl_rest_port,11000}.                       
{ssl_capi_port,11001}.
{ssl_proxy_downstream_port,11002}.
{ssl_proxy_upstream_port,11003}.
</codeblock>
    
    <note type="note">If the newly configured ports overlap with ports used by other running applications,
      Couchbase fails to start. If the newly configured ports overlap with ports used by Couchbase
      buckets, erlang crash notifications display in the log file. </note>
      
    </section>
  </body>
  <related-links>
    <linklist>
      <link href="install-networkPorts.dita"></link>
    </linklist>
  </related-links>
</topic>
