<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="reference_ik4_sxz_n4">
  <title>DCP statistics (CLI)</title>
  <shortdesc>Statistics for the Database Change Protocol (DCP) are obtained via the CLI with the <codeph>cbstats</codeph> tool.</shortdesc>
  <refbody>
    
    
    <table frame="all" id="table_psm_zxz_n4">
      <title>DCP statistics</title>
      <tgroup cols="2">
        <colspec colname="c1" colnum="1" colwidth="1*"/>
        <colspec colname="c2" colnum="2" colwidth="2.03*"/>
        <thead>
          <row>
            <entry>Option</entry>
            <entry>Description</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>dcp</entry>
            <entry>Retrieves connections specific to statistics.</entry>
          </row>
          <row>
            <entry>dcpagg</entry>
            <entry>Retrieves statistics that are logically grouped and aggregated together by prefixes.</entry>
          </row>
          <row>
            <entry>failovers</entry>
            <entry>Retrieves vBucket failover logs.</entry>
          </row>
         
        </tbody>
      </tgroup>
    </table>
    
    
    
    <section><title>Syntax</title>
      
    <codeblock>
cbstats HOST:11210 dcp
cbstats HOST:11210 dcpagg
cbstats HOST:11210 failovers
    </codeblock>
      <note type="note">Specify the memcached port, 11210, when retrieving statistics.</note>
      
      

    </section>
    
    
    <example><title>cbstats dcp</title>
      
      <codeblock>
 # cbstats 10.5.2.54:11210 dcp
 
 ep_dcp_count:                                                                               6
 ep_dcp_items_remaining:                                                                     0
 ep_dcp_items_sent:                                                                          0
 ep_dcp_producer_count:                                                                      3
 ep_dcp_queue_backfillremaining:                                                             0
 ep_dcp_queue_fill:                                                                          0
 ep_dcp_total_bytes:                                                                         11264
 ep_dcp_total_queue:                                                                         0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:connected:                      true
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:created:                        1812
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:pending_disconnect:             false
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:reserved:                       true
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_buffer_bytes:        0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_buffer_items:        0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_cur_snapshot_end:    18446744073709551615
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_cur_snapshot_start:  0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_cur_snapshot_type:   memory
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_end_seqno:           18446744073709551615
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_flags:               0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_items_ready:         false
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_last_received_seqno: 0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_opaque:              74
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_snap_end_seqno:      0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_snap_start_seqno:    0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_start_seqno:         0
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_state:               reading
 eq_uprq:replication:ns_1@10.5.2.117->ns_1@10.5.2.54:default:stream_100_vb_uuid:             164761896165868
 ...
    </codeblock></example>
    
   
    
    <example><title>cbstats dcpagg</title>
      
      <p>Aggregate statistics are provided by the <codeph>dcpagg</codeph> parameter.</p>
      
      <codeblock>
# cbstats 10.5.2.54:11210 dcpagg

 :total:count:                   3
 :total:items_remaining:         0
 :total:items_sent:              0
 :total:producer_count:          3
 :total:total_backlog_size:      0
 :total:total_bytes:             11264
 replication:count:              3
 replication:items_remaining:    0
 replication:items_sent:         0
 replication:producer_count:     3
 replication:total_backlog_size: 0
 replication:total_bytes:        11264
   
    </codeblock>
    </example>  
    
    <example><title>cbstats failovers</title>
      <codeblock>
# cbstats 10.5.2.54:11210 failovers

 vb_1000:0:id:        101754288503529
 vb_1000:0:seq:       0
 vb_1000:num_entries: 1
 ...
        
        
      </codeblock>
    
    </example>
    

    
    
   
    
    
  </refbody>
</reference>
