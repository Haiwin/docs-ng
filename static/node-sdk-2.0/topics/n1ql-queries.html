<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server documentation"><title>Working with N1QL queries</title><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="navbar-brand" style="color:#000552;" href="/">Couchbase
								Documentation <small>beta</small></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></header><div id="content" class="container"><div class="row"><nav class="col-md-3"><div class="well"><ul class="nav nav-list list-group"><li><a href="../topics/overview.html">Couchnode SDK 2.0</a></li><li><a href="../topics/getting-started.html">Getting Started</a></li><li><a href="../topics/tutorial-intro.html">Couchnode tutorial</a></li><li><a href="../topics/managing-connections.html">Managing server connections </a></li><li><a href="../topics/documents.html">Working with documents</a></li><li><a href="../topics/querying.html">Querying buckets</a><ul class="nav nav-list"><li><a href="../topics/view-queries.html">Working with view queries</a></li><li class="active"><a href="../topics/n1ql-queries.html">Working with N1QL queries</a><ul class="nav nav-list"></ul></li></ul></li><li><a href="../topics/handling-timeouts.html">Handling timeouts</a></li><li><a href="../topics/handling-errors.html">Handling errors</a></li><li><a href="../topics/logging.html">Setting up logging</a></li><li><a href="../topics/performance-tuning.html">Performance tuning</a></li></ul></div></nav><main class="col-md-9"><div class="gcse-wrapper"><div class="gcse-search"></div></div>
 <h1 class="title topictitle1">Working with N1QL queries</h1>

 
 <div class="body conbody"><p class="shortdesc">You can perform Couchbase Query Language (N1QL) queries via Couchnode. </p>

  <p class="p">To send N1QL queries, you must specify a list of application query hosts through the
				<samp class="ph codeph">enableN1ql</samp> method (a temporary necessity). After you have done this,
			you can perform a N1QL query by using the <samp class="ph codeph">query()</samp> method, which accepts a
			query created through the N1qlQuery class. You receive an array of objects representing the
			results through your specified callback.</p>

		<p class="p">The following example shows how to send a N1QL query:</p>

  <pre class="pre codeblock">var N1qlQuery = require('couchbase').N1qlQuery;
var myBucket = myCluster.openBucket();
var query = N1qlQuery.fromString('SELECT * FROM default');
myBucket.query(query, function(err, res) {
  if (err) {
    console.log(‘query failed’, err);
    return;
  }
  console.log(‘success!’, res);
});</pre>

 	
 	<p class="p">Sample output from the example:</p>

 	<pre class="pre codeblock language-javascript">success! [
  { field_name: ‘value’ },
  { field_name: ‘value’ }
]</pre>

    <div class="note note"><span class="notetitle">Note:</span> Unlike ViewQuery type queries, the N1qlQuery type queries are not currently capable of
      streaming rows individually, and instead you must always receive the full result once the
      query has fully completed.</div>

 </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/querying.html" title="You can retrieve sets of information from Couchbase Server by using view queries or N1QL queries.">Querying buckets</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-default navbar-fixed-bottom"><div class="container"><div class="copyright"> © 2014 COUCHBASE All rights reserved. </div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>