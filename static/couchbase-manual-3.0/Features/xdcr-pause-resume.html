<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a><ul class="nav nav-list"><li><a href="../Features/bcp.html">Database Change Protocol</a></li><li><a href="../Features/global-thread-pool.html">Shared thread pool</a></li><li><a href="../Features/bucket-eviction.html">Metadata ejection</a></li><li><a href="../Features/bucket-priority.html">Disk I/O priority</a></li><li><a href="../Features/graceful-failover.html">Graceful failover</a></li><li><a href="../Features/delta-node-recovery.html">Delta node recovery</a></li><li><a href="../Features/increment-backup.html">Incremental backup and restore</a></li><li><a href="../Features/index-updates.html">Stream-based views</a></li><li><a href="../Features/xdcr-memory-replication.html">Stream-based XDCR</a><ul class="nav nav-list"><li class="active"><a href="../Features/xdcr-pause-resume.html">Pause and resume replication</a><ul class="nav nav-list"></ul></li></ul></li><li><a href="../Features/security-admin-access.html">Encrypted admin access</a></li><li><a href="../Features/security-clientServer-comm.html">Encrypted data access</a></li><li><a href="../Features/security-client-ssl.html">Configuring clients for SSL</a></li><li><a href="../Features/cluster-wide-info-intro.html">Cluster-wide diagnostics</a></li></ul></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
  <h1 class="title topictitle1">Pause and resume replication</h1>

  
  
  <div class="body"><p class="shortdesc">During XDCR replication, the process can be paused and resumed. Performed via the
    Couchbase command-line interface (CLI).</p>

    <p class="p">XDCR streams between the source and destination cluster can be paused and later resumed. 
      After XDCR is resumed, data continues to replicate between the source and destination clusters
      starting from where it previously left off.
    </p>

       
    <div class="section"><h2 class="title sectiontitle">CLI</h2>
      <p class="p">XDCR pause and resume is implemented with <samp class="ph codeph">couchbase-cli xdcr-replicate</samp>.</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic_ix4_hkh_14__table_drj_bcn_c4" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. xdcr-replicate options</span></caption>
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="33.44481605351171%" id="d58403e43">Option</th>

              <th class="entry" valign="top" width="66.5551839464883%" id="d58403e46">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--create</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Create and start a new replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--delete</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Stop and cancel a replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--list</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">List all XDCR replications</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--pause</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Pause the replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--resume</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Resume the replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--settings</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Update settings for the replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--xdcr-replicator=REPLICATOR</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Replication ID</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--xdcr-from-bucket=BUCKET</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Local bucket name to replicate from</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--xdcr-cluster-name=CLUSTERNAME</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Remote cluster to replicate to</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--xdcr-to-bucket=BUCKETNAME</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Remote bucket to replicate to</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--max-concurrent - reps =[ 32 ]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Maximum concurrent replications per bucket, 8 to 256</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--checkpoint-interval =[ 1800 ]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Intervals between checkpoints , 60 to 14400 seconds</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--worker-batch-size =[ 500 ]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Document batch size,  500 to 10000</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--doc-batch size =[ 2048 ] KB</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Document batch size, 10 to 100000 KB</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--failure-restart-interval =[ 30 ]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Interval for restarting failed xdcr, 1 to 300 seconds</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">-- optimistic-replication-threshold =[ 256 ]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Document body size threshold (bytes) to trigger optimistic replication</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="33.44481605351171%" headers="d58403e43 ">--xdcr-replication-mode=[xmem|capi]</td>

              <td class="entry" valign="top" width="66.5551839464883%" headers="d58403e46 ">Replication protocol, either capi or xmem</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>

      
      <div class="section"><h2 class="title sectiontitle">Syntax</h2>
        <pre class="pre codeblock">
couchbase-cli xdcr-replicate -c HOST:PORT
    --pause	
    --xdcr-replicator=REPLICATOR	
    -u ADMIN -p PASSWORD         
 
couchbase-cli xdcr-replicate -c HOST:PORT
  --resume	
  --xdcr-replicator=REPLICATOR	
  -u ADMIN -p PASSWORD
        </pre>

        
      </div>

      

    <div class="example"><h2 class="title sectiontitle">Pausing a running replication stream</h2>
      <pre class="pre codeblock">
couchbase-cli xdcr-replicate -c 192.168.0.1:8091 \\	
    --pause \\	
    --xdcr-replicator=f4eb540d74c43fd3ac6d4b7910c8c92f/default/default \\	
    -u Administrator -p password
      </pre>

    </div>

      
    
    
      <div class="example"><h2 class="title sectiontitle">Resuming a paused replication stream</h2>
      <pre class="pre codeblock">
couchbase-cli xdcr-replicate -c 192.168.0.1:8091 \\	
    --resume \\	
    --xdcr-replicator=f4eb540d74c43fd3ac6d4b7910c8c92f/default/default \\	
    -u Administrator -p password
      </pre>

      </div>

      
      <div class="example"><h2 class="title sectiontitle">Updating settings for a replication stream</h2>
      <pre class="pre codeblock">
couchbase-cli xdcr-replicate -c 192.168.0.1:8091 \\	
    --settings \\	
    --xdcr-replicator=f4eb540d74c43fd3ac6d4b7910c8c92f/default/default \\	
    --max-concurrent-reps=32 \\	
    --checkpoint-interval=1800 \\	
    --worker-batch-size=500 \\	
    --doc-batch-size=2048 \\	
    --failure-restart-interval=30 \\	
    --optimistic-replication-threshold=256 \\	
    -u Administrator -p password        
      </pre>

      </div>

    
    
  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Features/xdcr-memory-replication.html" title="Stream-based XDCR collects data changes from memory on the source cluster and streams the data changes directly to memory on the destination cluster.">Stream-based XDCR</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer></body></html>