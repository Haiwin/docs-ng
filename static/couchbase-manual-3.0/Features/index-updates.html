<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a><ul class="nav nav-list"><li><a href="../Features/bcp.html">Database Change Protocol</a></li><li><a href="../Features/global-thread-pool.html">Shared thread pool</a></li><li><a href="../Features/bucket-eviction.html">Metadata ejection</a></li><li><a href="../Features/bucket-priority.html">Disk I/O priority</a></li><li><a href="../Features/graceful-failover.html">Graceful failover</a></li><li><a href="../Features/delta-node-recovery.html">Delta node recovery</a></li><li><a href="../Features/increment-backup.html">Incremental backup and restore</a></li><li class="active"><a href="../Features/index-updates.html">Stream-based views</a><ul class="nav nav-list"></ul></li><li><a href="../Features/xdcr-pause-resume.html">Pause and resume replication</a></li><li><a href="../Features/xdcr-memory-replication.html">Stream-based XDCR</a></li><li><a href="../Features/security-admin-access.html">Encrypted admin access</a></li><li><a href="../Features/security-clientServer-comm.html">Encrypted data access</a></li><li><a href="../Features/security-client-ssl.html">Configuring clients for SSL</a></li><li><a href="../Features/cluster-wide-info-intro.html">Cluster-wide diagnostics</a></li></ul></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
 <h1 class="title topictitle1">Stream-based views</h1>

 
 <div class="body conbody"><p class="shortdesc">Indexing is performed as soon as data changes in memory without waiting for persistence to disk. 
  As a result, views have up-to-date data and faster queries.</p>

  
  <p class="p">Indexing occurs as soon as data changes in memory due to the Database Change Protocol (DCP), 
   a stream-based protocol. 
   With DCP, changes made to documents in-memory are immediately streamed to be indexed without being written to disk. 
   This provides faster view consistency which provides fresher data.</p>

    
   <ul class="ul">
    <li class="li">Views are updated with key-value sooner</li>

    <li class="li">Lag time for view consistency is reduced</li>
 
    <li class="li">Views are more closely synch with the data</li>

   </ul>

   
   <div class="note note"><span class="notetitle">Note:</span> When a Couchbase Server cluster has both 2.x and 3.0 servers, the Couchbase 3.0
   server has faster indexing.</div>

  
  
   
   <p class="p">When the <samp class="ph codeph">stale=false</samp> query is run, the indexer picks up changes that occurred (latest data) after the query was issued. 
    The changes are picked up from memory and not disk. The index occurs in the following manner:</p>

  
  
  <ol class="ol">
   <li class="li">A set request comes in from the application.</li>

   <li class="li">Couchbase Server responds back that they key is written.</li>

   <li class="li">Couchbase Server quickly replicates the data out to memory on the other nodes.</li>

   <li class="li">At the same time, data is put into a write queue to be persisted to disk.</li>

  </ol>

  
  
  



  <div class="section"><h2 class="title sectiontitle">Impacted documentation</h2>
  <ul class="ul">
   <li class="li">Views and view operations</li>

  </ul>

  </div>
 
  
 


 </div>

 
 <div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Features/features.html">Couchbase 3.0 Features</a></div>
</div>

<div class="linklist linklist"><strong>Related topics</strong><br>

<div><a class="link" href="../Views/views-operation.html">Views operation</a></div></div>
</div>
</main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								Â© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>