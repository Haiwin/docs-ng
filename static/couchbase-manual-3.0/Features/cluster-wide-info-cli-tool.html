<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="../css/base.css" rel="stylesheet"><script src="../js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="../images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index.html">Docs Archive</a></li></ul></div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a><ul class="nav nav-list"><li><a href="../Features/bcp.html">Database Change Protocol</a></li><li><a href="../Features/global-thread-pool.html">Shared thread pool</a></li><li><a href="../Features/bucket-eviction.html">Metadata ejection</a></li><li><a href="../Features/bucket-priority.html">Disk I/O priority</a></li><li><a href="../Features/graceful-failover.html">Graceful failover</a></li><li><a href="../Features/delta-node-recovery.html">Delta node recovery</a></li><li><a href="../Features/increment-backup.html">Incremental backup and restore</a></li><li><a href="../Features/index-updates.html">Stream-based views</a></li><li><a href="../Features/xdcr-memory-replication.html">Stream-based XDCR</a></li><li><a href="../Features/security-admin-access.html">Encrypted admin access</a></li><li><a href="../Features/security-clientServer-comm.html">Encrypted data access</a></li><li><a href="../Features/security-client-ssl.html">Configuring clients for SSL</a></li><li><a href="../Features/cluster-wide-info-intro.html">Cluster-wide diagnostics</a><ul class="nav nav-list"><li><a href="../Features/cluster-wide-info-web.html">Managing diagnostics (UI)</a></li><li><a href="../Features/cluster-wide-info-cli.html">Managing diagnostics (CLI)</a><ul class="nav nav-list"><li class="active"><a href="../Features/cluster-wide-info-cli-tool.html">Collecting diagnostics via the couchbase-cli tool</a><ul class="nav nav-list"></ul></li><li><a href="../Features/cluster-wide-info-cbcollect-info-tool.html">Collecting diagnostics via the cbcollect_info tool</a></li></ul></li><li><a href="../Features/cluster-wide-info-rest.html">Managing diagnostics (REST API)</a></li></ul></li></ul></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
	<h1 class="title topictitle1">Collecting diagnostics via the couchbase-cli tool</h1>

	
	<div class="body conbody"><p class="shortdesc">You can start, stop, and view status of a diagnostics collection by using the couchbase-cli tool.</p>

		<div class="section"><h2 class="title sectiontitle">Start log collection command</h2>
			
			<p class="p">The start log collection command initiates a log collection process. You must specify
				whether to collect logs from all nodes or only specified nodes. You can optionally
				request the logs to be uploaded to Couchbase. If you request an upload to Couchbase, you
				must include the name of your organization and optionally a support ticket number. The
				command uses the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-start</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
				<span class="ph delim">{</span>
				<span class="keyword option">--nodes</span><span class="ph oper">=</span><span class="ph var">node1,node2,...</span>
				<span class="ph delim">|</span>
				<span class="keyword option">--all-nodes</span>
				<span class="ph delim">}</span> [--upload <span class="keyword option">--upload-host</span><span class="ph delim">=</span><span class="ph var">host</span>
				<span class="keyword option">--customer</span><span class="ph oper">=</span><span class="ph var">name</span>
					[<span class="keyword option">--ticket</span><span class="ph oper">=</span><span class="ph var">ticketNumber</span> ] ] </span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Stop log collection command</h2>
			
			<p class="p">The stop log collection command cancels collection on each node. It uses the following
				syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-stop</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Report log collection status command</h2>
			
			<p class="p">The report log collection status command returns information about each node. It uses
				the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-status</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 
				<span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Features/cluster-wide-info-cli.html" title="The command-line interface provides commands to start, stop, and report status for log collection.">Managing diagnostics (CLI)</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								Â© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer></body></html>