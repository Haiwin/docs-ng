<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div><div class="gcse-searchbox">box or no box</div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li class="active"><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a><ul class="nav nav-list"></ul></li></ul></div></nav><main class="span9">
  <h1 class="title topictitle1">Release notes (beta)</h1>

  <div class="body">
    <p class="p">This release note is for the 3.0.0 BETA release. It contains a list of known and fixed
      issues.</p>

    
    <div class="section"><h2 class="title sectiontitle">Known issues</h2>
      
      <dl class="dl">
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11661" target="_blank">MB-11661</a></dt>

          <dd class="dd">mem_used in increasing and dropping in basic setup with 5 buckets</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11658" target="_blank">MB-11658</a></dt>

          <dd class="dd">Tombstone purge does not work due to misinterpretation of the <samp class="ph codeph">drop_deletes</samp> flag.</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11643" target="_blank">MB-11643</a></dt>

          <dd class="dd">Incoming workload suffers when XDCR enabled</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11642" target="_blank">MB-11642</a></dt>

          <dd class="dd">Intra-replication falling behind under moderate-heavy workload
            <p class="p">Under a moderate replication workload (20-30K sets per second), 
              the backlog becomes too large resulting in high memory usage.</p>
</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11630" target="_blank">MB-11630</a></dt>

          <dd class="dd">Rebalance in operation exited with reason {bulk_set_vbucket_state_failed}</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11629" target="_blank">MB-11629</a></dt>

          <dd class="dd">Memcached crashed during rebalance</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11608" target="_blank">MB-11608</a></dt>

          <dd class="dd">It is possible to prevent ns_server shutdown with some use of http (was: KV+XDCR
            System test: Cluster in unstable state after warmup- 2 nodes in pending state, memcached
            did not start on 1 node)</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11606" target="_blank">MB-11606</a></dt>

          <dd class="dd">Error displayed when node did not mark to collect</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11601" target="_blank">MB-11601</a></dt>

          <dd class="dd">KV-only system test. Rebalance hangs in swap rebalance due to memory bloating in one
            node</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11597" target="_blank">MB-11597</a></dt>

          <dd class="dd">KV+XDCR System test: Mutation replication rate for uni-xdcr is almost zero(900K items
            remaining) while another bi-xdcr to same cluster is ~10k ops/sec </dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11568" target="_blank">MB-11568</a></dt>

          <dd class="dd">IP does not show the same in each step of cluster wide collect info</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11554" target="_blank">MB-11554</a></dt>

          <dd class="dd">Metadata inconsistent between source and destination clusters.
          <p class="p">After failing over and rebalancing nodes on a destination cluster and 
            then replicating from the source cluster to destination cluster, 
          the document metadata is inconsistent between source and destination clusters. 
          This behavior occurs when the cbrecovery (1st) and rebalance (2nd) sequence is performed.</p>
</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11553" target="_blank">MB-11553</a></dt>

          <dd class="dd">Resident memory ratio drops to zero on mere updates of existing items of single node
            with no upr consumers at all</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11435" target="_blank">MB-11435</a></dt>

          <dd class="dd">1500-2000% CPU utilization by beam.smp on source nodes in XDCR scenarios (was ~500% in
            2.5.x)</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11434" target="_blank">MB-11434</a></dt>

          <dd class="dd">600-800% CPU consumption by memcached on the source cluster. <p class="p">In XDCR scenarios, the
              CPU usage for memcached process is more than two times the usage in the previous
              release. This is due to increased scheduling overhead from the shared thread
              pool.</p>
<p class="p">Workaround: Reduce the number of threads on systems that have more than 30
              cores.</p>
</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11405" target="_blank">MB-11405</a></dt>

          <dd class="dd">~2400% CPU consumption by memcached during ongoing workload with five (5) buckets.
              <p class="p">In XDCR scenarios, the CPU usage for memcached process is more than two times the
              usage in the previous release. This is due to increased scheduling overhead from the
              shared thread pool. </p>
<p class="p">Workaround: Reduce the number of threads on systems that
              have more than 30 cores.</p>
</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11383" target="_blank">MB-11383</a></dt>

          <dd class="dd">warmup_min_items_threshold setting is not honored correctly in 3.0 warmup</dd>

        
        
          <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11299" target="_blank">MB-11299</a></dt>

          <dd class="dd">UPR replica streams cannot send items from partial snapshots</dd>

        
      </dl>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Fixed issues</h2>

        <dl class="dl">
          
            <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11636" target="_blank">MB-11636</a></dt>

            <dd class="dd">Initial index build is four times (4x) slower than normal.</dd>

          
          
          
            <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11621" target="_blank">MB-11621</a></dt>

            <dd class="dd">Rebalance fails when adding node back after failover (delta recovery)</dd>

          
          
          
            <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11605" target="_blank">MB-11605</a></dt>

            <dd class="dd">XDCR replication (source to destination cluster) hangs when a hard OOM is hit. 
              
              <p class="p">Uni-directional XDCR replication gets stuck if the source cluster hits hard
              out-of-memory (OOM) prior to the start of XDCR replication. 
              A hard OOM means that the bucket RAM quota has been exceeded. </p>

              <p class="p">Workaround: It is recoverable by increasing the bucket RAM quota on the source cluster.</p>
</dd>

              
          
            
            
              <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-11578" target="_blank">MB-11578</a></dt>

              <dd class="dd">Crash with Segmentation fault in couch_view_group_cleanup </dd>

            
 
          
            <dt class="dt dlterm"><a class="xref" href="http://www.couchbase.com/issues/browse/MB-10252" target="_blank">MB-10252</a></dt>

            <dd class="dd">total_fragmentation_bytes metric is misleading. This should NOT be in a release
              note because it's internal!</dd>

          
          
        </dl>

    
    
    
    </div>

  </div>

</main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>