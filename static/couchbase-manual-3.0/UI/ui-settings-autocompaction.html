<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a><ul class="nav nav-list"><li><a href="../Misc/admin-basics.html">Administration basics</a></li><li><a href="../Concepts/concept-intro.html">Architecture and concepts</a></li><li><a href="../Concepts/bp-deployment-considerations.html">Deployment considerations</a></li><li><a href="../Tasks/cluster-management.html">Cluster management</a></li><li><a href="../Monitoring/monitor-intro.html">Monitoring</a></li><li><a href="../Views/views-intro.html">Views and indexes</a></li><li><a href="../XDCR/xdcr-intro.html">Cross Datacenter Replication (XDCR)</a></li><li><a href="../UI/ui-intro.html">Couchbase web console</a><ul class="nav nav-list"><li><a href="../UI/ui-cluster-summary.html">Cluster Overview</a></li><li><a href="../UI/ui-server-nodes.html">Server Nodes</a></li><li><a href="../UI/ui-data-buckets.html">Data Buckets</a></li><li><a href="../UI/ui-views-editor.html">Views</a></li><li><a href="../UI/ui-xdcr-panel.html">XDCR</a></li><li><a href="../UI/ui-logs.html">Log</a></li><li><a href="../UI/ui-settings.html">Settings</a><ul class="nav nav-list"><li><a href="../UI/ui-settings-cluster.html">Cluster tab</a></li><li><a href="../UI/ui-settings-update-notifications.html">Update Notifications tab</a></li><li><a href="../UI/ui-settings-autofailover.html">Auto-Failover tab</a></li><li><a href="../UI/ui-settings-alerts.html">Alerts tab</a></li><li class="active"><a href="../UI/ui-settings-autocompaction.html">Auto-Compaction tab</a><ul class="nav nav-list"></ul></li><li><a href="../UI/ui-settings-sample-buckets.html">Sample Buckets tab</a></li><li><a href="../UI/ui-settings-account-mgmt.html">Account Management tab</a></li></ul></li></ul></li><li><a href="../Misc/faq.html">FAQs</a></li><li><a href="../Misc/sample-bucket-intro.html">Sample buckets</a></li><li><a href="../Misc/Trbl-intro.html">Troubleshooting</a></li><li><a href="../Misc/deprecated.html">Misc/deprecated.dita</a></li></ul></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
  <h1 class="title topictitle1">Auto-Compaction tab</h1>

  <div class="body">
    <p class="p">The <span class="ph uicontrol">Auto-Compaction</span> tab
      configures the default auto-compaction settings for all the databases. 
      These can be overridden using per-bucket settings available when creating or editing data buckets. 
      You can provide a purge interval to remove the key and metadata for items that have been deleted or are expired. 
      This is known as ‘tombstone purging’. </p>

    
              <img class="image" src="../images/web-console-server-settings-autocompaction.png" width="720">
    
    <p class="p">The Auto-Compaction tab sets the following default parameters:</p>


      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic_etf_npc_34__table_m3c_tqc_34" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. Auto-compaction parameters</span></caption>
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="30.959752321981426%" id="d118618e38">Parameter</th>

              <th class="entry" valign="top" width="69.04024767801857%" id="d118618e41">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">Database Fragmentation</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">If checked, you must specify either the percentage of fragmentation at which
                database compaction will be triggered, or the database size at which compaction will
                be triggered. You can also configure both trigger parameters.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">View Fragmentation</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">If checked, you must specify either the percentage of fragmentation at which
                database compaction will be triggered, or the view size at which compaction will be
                triggered. You can also configure both trigger parameters.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">Time Period</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">If checked, you must specify the start hour and minute, and end hour and minute
                of the time period when compaction is allowed to occur.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">Abort if run time exceeds the above period</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">If checked, if database compaction is running when the configured time period
                ends, the compaction process will be terminated.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">Process Database and View compaction in parallel</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">If enabled, database and view compaction will be executed simultaneously,
                implying a heavier processing and disk I/O load during the compaction
                process.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="30.959752321981426%" headers="d118618e38 ">Metadata Purge Interval</td>

              <td class="entry" valign="top" width="69.04024767801857%" headers="d118618e41 ">
                <p class="p">Defaults to three days. Tombstones are records of expired or deleted items and
                  they include the key and metadata. Tombstones are used in Couchbase Server to
                  provide eventual consistency of data between clusters.</p>

                <p class="p">The auto-compaction process waits this number of days before it permanently
                  deletes tombstones for expired or deleted items. </p>

                <p class="p">If you set this value too low, you may see more inconsistent results in views
                  queries such as deleted items in a result set. You may also see inconsistent items
                  in clusters with XDCR set up between the clusters. If you set this value too high,
                  it will delay the server from reclaiming disk space.</p>

              </td>

            </tr>

          </tbody>

        </table>
</div>


    
  </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../UI/ui-settings.html" title="The Settings section provides configuration and information for the cluster, update notifications, auto failover, alerts, auto compaction, sample buckets, and account management.">Settings</a></div>
</div>

<div class="linklist linklist"><strong>Related topics</strong><br>

<div><a class="link" href="../Concepts/concept-tombstone.html" title="Tombstones are records of expired or deleted items that include item keys and metadata.">Tombstone purging</a></div>
<div><a class="link" href="../Tasks/tasks-compaction.html" title="Database and view compaction helps to reclaim disk space and reduce fragmentation.">Compaction</a></div>
<div><a class="link" href="../REST/rest-bucket-intro.html" title="The bucket management and configuration REST API endpoints provide a fine level of control over the individual buckets in the cluster, their configuration, and specific operations.">Buckets REST API</a></div>
<div><a class="link" href="../REST/compaction-rest-api.html">Compaction REST API</a></div></div>
</div>
</main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer></body></html>