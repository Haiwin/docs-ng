<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server documentation"><title>Recovering a node</title><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="navbar-brand" style="color:#000552;" href="/">Couchbase
								Documentation <small>beta</small></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></header><div id="content" class="container"><div class="row"><nav class="col-md-3"><div class="well"><ul class="nav nav-list list-group"><li><a href="../Couchbase-intro.html">Introduction</a></li><li><a href="../Whats-new-3.0.html">What's new in 3.0</a></li><li><a href="../install-intro.html">Installation and upgrade</a></li><li><a href="../admin-intro.html">Administration</a><ul class="nav nav-list"><li><a href="../Misc/admin-basics.html">Administration basics</a></li><li><a href="../Concepts/concept-intro.html">Architecture and concepts</a></li><li><a href="../Concepts/bp-deployment-considerations.html">Deployment considerations</a></li><li><a href="../Tasks/cluster-management.html">Cluster management</a></li><li><a href="../Monitoring/monitor-intro.html">Monitoring</a></li><li><a href="../Views/views-intro.html">Views and indexes</a></li><li><a href="../XDCR/xdcr-intro.html">Cross Datacenter Replication (XDCR)</a></li><li><a href="../UI/ui-intro.html">Web console</a><ul class="nav nav-list"><li><a href="../UI/ui-cluster-summary.html">Cluster Overview</a></li><li><a href="../UI/ui-server-nodes.html">Server Nodes</a><ul class="nav nav-list"><li><a href="../UI/ui-dcp-queues.html">Viewing DCP queues</a></li><li><a href="../UI/ui-task-failover-graceful.html">Failing over a node</a></li><li class="active"><a href="../UI/ui-task-node-recovery-incremental.html">Recovering a node</a><ul class="nav nav-list"></ul></li></ul></li><li><a href="../UI/ui-data-buckets.html">Data Buckets</a></li><li><a href="../UI/ui-views-editor.html">Views</a></li><li><a href="../UI/ui-xdcr-panel.html">XDCR</a></li><li><a href="../UI/ui-logs.html">Log</a></li><li><a href="../UI/ui-settings.html">Settings</a></li></ul></li><li><a href="../Misc/faq.html">FAQs</a></li><li><a href="../Misc/sample-bucket-intro.html">Sample buckets</a></li><li><a href="../Misc/Trbl-intro.html">Troubleshooting</a></li><li><a href="../Misc/deprecated.html">Deprecated items</a></li></ul></li><li><a href="../cli-intro.html">CLI reference</a></li><li><a href="../rest-intro.html">REST API reference</a></li><li><a href="../rel-notes/rel-notes3.0.html">Release notes</a></li></ul></div></nav><main class="col-md-9"><div class="gcse-wrapper"><div class="gcse-search"></div></div>
    <h1 class="title topictitle1">Recovering a node</h1>

    
    <div class="body taskbody"><p class="shortdesc">Recovery is performed after a server node is failed over and before rebalance
        operations. Either Delta or Full recovery can be specified.</p>


        <div class="section context">
            <div class="p">The process for re-adding a server involves: <ol class="ol">
                    <li class="li">Fail over the node using either the graceful or hard failover method.
                        Graceful failover is recommended.</li>

                    <li class="li">After the node is failed over, specify whether to use delta or full
                        recovery.</li>

                    <li class="li">Perform maintenance operations on the node. </li>

                    <li class="li">Rebalance the cluster. During the rebalance, the same server node is added
                        back to the cluster using the specified recovery method.</li>

                </ol>

            </div>

            
            <p class="p">To use delta recovery during failover, recovery, and rebalance operations:</p>

        </div>

        
        
        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Navigate to <span class="ph uicontrol">Server Nodes</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Failover</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Select <span class="ph uicontrol">Graceful Failover</span>.</span>
                <div class="itemgroup info">When failover happens on a specific node, that node is marked as
                    <span class="ph uicontrol">Failed Over: Pending Removal</span></div>
                
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery.png" width="720"></div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Delta Recovery</span>. Alternatively, select <span class="ph uicontrol">Full
                    Recovery</span>.</span>
                <div class="itemgroup info">With delta recovery mode, Couchbase detects (with the Database Change
                    Protocol) which data files are up-to-date and which are out-of-date and then,
                    during rebalance, the existing data files on the failed over server node are
                    retained and the out-of-date files are updated. With full recovery mode, the
                    data files are removed from the failed over server node and then, during
                    rebalance, the node is populated with new data files (active and replica
                    vBuckets).</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To view the status of the server node, click <span class="ph uicontrol">Pending Rebalance</span>.</span>
                <div class="itemgroup info">The server node shows a <span class="ph uicontrol">Pending delta recovery</span> status
                    if delta recovery was selected. If you cancel the recovery, you can re-select
                    either delta or full recovery.</div>
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery-pending.png" width="720"></div>
                
            
                    
                
                
                
            </li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Rebalance</span>.</span>
            <div class="itemgroup info">The rebalance operation must be performed to re-add the failed over server node to
                    the cluster.</div></li>
</ol>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../UI/ui-server-nodes.html" title="The Server Nodes section shows statistics across the server nodes in the cluster.">Server Nodes</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-default navbar-fixed-bottom"><div class="container"><div class="copyright"> Â© 2014 COUCHBASE All rights reserved. </div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>