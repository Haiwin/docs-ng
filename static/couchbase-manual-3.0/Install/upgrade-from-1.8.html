<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div><div class="gcse-searchbox">box or no box</div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a></li><li><a href="../install-intro.html">Couchbase Installation</a><ul class="nav nav-list"><li><a href="../Install/setup-overview.html">Couchbase setup overview</a></li><li><a href="../Install/pre-install.html">Pre-installation</a></li><li><a href="../Install/RHEL-install-intro.html">Red Hat Linux installation</a></li><li><a href="../Install/Ubuntu-install.html">Ubuntu Linux installation</a></li><li><a href="../Install/Windows-install.html">Microsoft Windows installation</a></li><li><a href="../Install/Mac-install.html">Mac OS X installation</a></li><li><a href="../Install/post-install.html">Post-installation</a></li><li><a href="../Install/uninstalling.html">Uninstalling</a></li><li><a href="../Install/upgrading.html">Upgrading</a><ul class="nav nav-list"><li><a href="../Install/upgrade-online.html">Online upgrades</a></li><li><a href="../Install/upgrade-offline.html">Offline upgrade</a></li><li><a href="../Install/upgrade-individual-nodes.html">Upgrading individual nodes</a></li><li><a href="../Install/upgrade-xdcr.html">Upgrading with XDCR</a></li><li class="active"><a href="../Install/upgrade-from-1.8.html">Upgrading from 1.8</a><ul class="nav nav-list"></ul></li><li><a href="../Install/upgrade-to-2.5.html">Upgrading to 2.5</a></li><li><a href="../Install/upgrade-mac.html">Upgrading on Mac</a></li><li><a href="../Install/upgrade-rhel.html">Upgrading on RHEL</a></li><li><a href="../Install/upgrade-ubuntu.html">Upgrading on Ubuntu</a></li><li><a href="../Install/upgrade-windows.html">Upgrading on Windows</a></li></ul></li><li><a href="../Install/migrating.html">Migrating</a></li></ul></li><li><a href="../admin-intro.html">Couchbase Administration</a></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
  <h1 class="title topictitle1">Upgrading from 1.8</h1>

  
  <div class="body"><p class="shortdesc">To upgrade from version 1.8.0, upgrade to version 1.8.1 first.</p>

    <p class="p">Couchbase Server 1.8 cannot be upgraded directly to 2.0 or higher, instead,
      first upgrade to Couchbase Server 1.8.1 for data compatibility and then upgrade to a higher
      release.</p>

    <p class="p">Until all nodes in a cluster are upgraded from 1.8.1 or earlier, features in the new Couchbase Server release are disabled. 
    This means views or XDCR do not function until all nodes in your cluster are migrated. 
    After all nodes are upgraded, the features are enabled.</p>

    
    <div class="note important"><span class="importanttitle">Important:</span> If you plan to upgrade from 1.8.0 to 2.0 or higher, ensure that there is enough disk space
      available for both your original Couchbase Server 1.8 data files and the new format for the
      new Couchbase Server files. Provide approximately three (3) times the disk space for
      functionality such as indexing and compaction. </div>

    
    <div class="section"><h2 class="title sectiontitle">Upgrade from 1.8.1 notes</h2><p class="p">You can upgrade from Couchbase Server 1.8.1
      to a higher release of Couchbase Server using either the online or offline upgrade
      method.</p>
<p class="p"><strong class="ph b">Use Online Upgrades from Couchbase Server 1.8.1</strong></p>
<p class="p">We recommend the
        online upgrade method when upgrading from 1.8.1 to a higher release of Couchbase Server. The
        process is quicker and can take place while clusters and applications are up and running.
        When upgrading from Couchbase Server 1.8.1 to a higher release of Couchbase Server, the data
        files are updated to use the new Couchstore data format instead of the SQLite format used in
        1.8.1 and earlier. This increases the upgrade time, and requires additional disk space to
        support the migration.</p>
<p class="p">Be aware that if you perform a scripted online upgrade from
          1.8.1 to a higher release of Couchbase Server, expect a 10 second delay from adding a node
          to the cluster and rebalancing. If a rebalance request occurs too soon after adding a node,
          the rebalance may fail.</p>
</div>

    
    <div class="section"><h2 class="title sectiontitle">Upgrade from 1.8 and earlier notes</h2>
      <p class="p">If you run Couchbase Server 1.8 or
      earlier, including Membase 1.7.2 and earlier, upgrade to Couchbase Server 1.8.1 first. The
      intermediate upgrade to Couchbase Server 1.8.1 allows the data files to be converted into
      the new Couchbase Server compatible formats. This conversion is only available when
      upgrading from 1.8.1 to a higher release of Couchbase Server.</p>

      <p class="p">To perform an offline
        upgrade, you use the standard installation system such as <samp class="ph codeph">dpkg</samp>,
        <samp class="ph codeph">rpm</samp> or Windows Setup Installer to upgrade the software on each machine.
        Each installer will perform the following operations:
      </p>

      <pre class="pre codeblock">
* Shutdown Couchbase Server 1.8. Do not uninstall the server.

* Run the installer. The installer will detect any prerequisite software or
  components. An error is raised if the pre-requisites are missing. If you install
  additional required components such as OpenSSL during the upgrade, you must
  manually restart Couchbase after you install the components.
</pre>

      
      <p class="p">The installer copies 1.8.1-compatible data and configuration files to a backup
  location.</p>
<p class="p">The <samp class="ph codeph">cbupgrade</samp> program automatically starts. This will
    non-destructively convert data from the 1.8.1 database file format (SQLite) to the newer
    database file format (couchstore). The 1.8 database files are left “as-is”, and new database
    files are created. There must be enough disk space to handle this conversion operation
    (e.g., 3x more disk space).</p>

      
      <div class="note note"><span class="notetitle">Note:</span> The data migration process from the old file
      format to the new file format may take some time. You should wait for the process to finish
      before starting Couchbase Server. </div>

      
      <p class="p">Once the upgrade process finishes, Couchbase Server starts automatically. 
        Repeat this process on all nodes within your cluster.</p>

    </div>

    
    
    
  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Install/upgrading.html">Upgrading</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>