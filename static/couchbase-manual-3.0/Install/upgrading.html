<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server documentation"><title>Upgrading</title><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="navbar-brand" style="color:#000552;" href="/">Couchbase
								Documentation <small>beta</small></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></header><div id="content" class="container"><div class="row"><nav class="col-md-3"><div class="well"><ul class="nav nav-list list-group"><li><a href="../Couchbase-intro.html">Introduction</a></li><li><a href="../Whats-new-3.0.html">What's new in 3.0</a></li><li><a href="../install-intro.html">Installation and upgrade</a><ul class="nav nav-list"><li><a href="../Install/setup-overview.html">Couchbase setup overview</a></li><li><a href="../Install/pre-install.html">Pre-installation</a></li><li><a href="../Install/RHEL-install-intro.html">Red Hat/Centos installation</a></li><li><a href="../Install/Ubuntu-install.html">Ubuntu/Debian installation</a></li><li><a href="../Install/Windows-install.html">Microsoft Windows installation</a></li><li><a href="../Install/Mac-install.html">Mac OS X installation</a></li><li><a href="../Install/post-install.html">Post-installation</a></li><li class="active"><a href="../Install/upgrading.html">Upgrading</a><ul class="nav nav-list"><li><a href="../Install/upgrade-online.html">Online upgrades</a></li><li><a href="../Install/upgrade-offline.html">Offline upgrade</a></li><li><a href="../Install/upgrade-individual-nodes.html">Upgrading servers</a></li><li><a href="../Install/upgrade-xdcr.html">Upgrading with XDCR</a></li></ul></li><li><a href="../Install/migrating.html">Migrating</a></li></ul></li><li><a href="../admin-intro.html">Administration</a></li><li><a href="../cli-intro.html">CLI reference</a></li><li><a href="../rest-intro.html">REST API reference</a></li><li><a href="../rel-notes/rel-notes3.0.html">Release notes</a></li></ul></div></nav><main class="col-md-9"><div class="gcse-wrapper"><div class="gcse-search"></div></div>
  <h1 class="title topictitle1">Upgrading</h1>

  <div class="body">
    
    <p class="p">The following are the officially supported upgrade paths for Couchbase Server for both online
      upgrades or offline upgrades:</p>

    <ul class="ul">
      <li class="li">Couchbase 2.x to a later version of Couchbase 2.x</li>

      <li class="li">Couchbase 2.x to Couchbase 3.0</li>

    </ul>

    <p class="p">You can perform a cluster upgrade in two ways:</p>

    <ul class="ul">
      <li class="li">Online upgrades</li>

      <li class="li">Offline upgrades</li>

    </ul>

    <p class="p">Prior to upgrade, perform a backup of the files.</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
        
        
        <thead class="thead" align="left">
          <tr class="row">
            <th class="entry" valign="top" width="23.640661938534276%" id="d64385e52">Platform</th>

            <th class="entry" valign="top" width="76.3593380614657%" id="d64385e55">Location</th>

          </tr>

        </thead>

        <tbody class="tbody">
          <tr class="row">
            <td class="entry" valign="top" width="23.640661938534276%" headers="d64385e52 ">Linux</td>

            <td class="entry" valign="top" width="76.3593380614657%" headers="d64385e55 "><samp class="ph codeph">/opt/couchbase/var/lib/couchbase/config/config.dat</samp></td>

          </tr>

          <tr class="row">
            <td class="entry" valign="top" width="23.640661938534276%" headers="d64385e52 ">Windows</td>

            <td class="entry" valign="top" width="76.3593380614657%" headers="d64385e55 "><samp class="ph codeph">C:\Program&nbsp;Files\Couchbase\Server\Config\var\lib\couchbase\config\config.dat</samp></td>

          </tr>

        </tbody>

      </table>
</div>


    
    <div class="section"><h2 class="title sectiontitle">Upgrading from Community Edition to Enterprise Edition</h2>
      <p class="p"><strong class="ph b">Use the same
          Couchbase Server version number when upgrading to the Enterprise Edition.</strong> Version
        differences may result in a failed upgrade. </p>
</div>

    
    <div class="section"><h2 class="title sectiontitle">Upgrading to 3.0</h2></div>

    
    <p class="p">With encryption access, the following port is reserved for client access to data nodes using
      SSL.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="22.675736961451246%" id="d64385e112">Port</th>

              <th class="entry" valign="top" width="77.32426303854876%" id="d64385e115">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d64385e112 ">11207</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d64385e115 ">Internal/External Bucket Port for SSL</td>

            </tr>

          </tbody>

        </table>
</div>

    
    
    <div class="section"><h2 class="title sectiontitle">Upgrading to 2.5</h2>
      
      <p class="p">Before upgrading to 2.5.x</p>

      
      <p class="p">If buckets are using any of
        the following reserved ports, change the port for the bucket. Otherwise, XDCR data
        encryption is unavailable. (This applies to both offline and online upgrades.)
      </p>

      <div class="note important"><span class="importanttitle">Important:</span> Ensure that the Secure Socket Layer (SSL) reserved ports are
        available prior to using XDCR data encryption. </div>

      
      <p class="p">With XDCR data encryption, the
          following ports are reserved:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="22.675736961451246%" id="d64385e161">Port</th>

              <th class="entry" valign="top" width="77.32426303854876%" id="d64385e164">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d64385e161 ">11214</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d64385e164 ">Incoming SSL proxy</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d64385e161 ">11215</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d64385e164 ">Internal outgoing SSL proxy</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d64385e161 ">18091</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d64385e164 ">Internal REST HTTPS for SSL</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d64385e161 ">18092</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d64385e164 ">Internal CAPI HTTPS for SSL </td>

            </tr>

          </tbody>

        </table>
</div>

      
      <div class="note note"><span class="notetitle">Note:</span> If Couchbase Server 2.5 has more than two (2) replicas, the first swap rebalance takes additional time. 
        This behavior is expected.</div>

    
        <div class="note restriction"><span class="restrictiontitle">Restriction:</span> The RPM package manager does not support the  
        <samp class="ph codeph">--relocate</samp> option because it cannot correctly detect which release should be kept and which should be replaced. 
        As result, all binary files and their wrapper scripts cannot be correctly installed into the relocated bin directory 
        during upgrade.
      </div>

    </div>

    
    
  </div>

  <div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="../Install/upgrade-online.html">Online upgrades</a></strong><br>
</li>
<li class="link ulchildlink"><strong><a href="../Install/upgrade-offline.html">Offline upgrade</a></strong><br>
</li>
<li class="link ulchildlink"><strong><a href="../Install/upgrade-individual-nodes.html">Upgrading servers</a></strong><br>
Upgrading Couchbase Server involves performing a backup and then the installation upgrade.</li>
<li class="link ulchildlink"><strong><a href="../Install/upgrade-xdcr.html">Upgrading with XDCR</a></strong><br>
The upgrade process when XDCR is implemented depends on the scenario.</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../install-intro.html">Installation and upgrade</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../CLI/cbbackup_tool.html" title="The cbbackup tool creates a copy of data from an entire running cluster, an entire bucket, a single node, or a single bucket on a single functioning node. Your node or cluster needs to be functioning in order to create the backup. Couchbase Server will write a copy of data onto disk.">cbbackup tool</a></div>
<div><a class="link" href="../CLI/cbrestore_tool.html">cbrestore tool</a></div></div>
</div>
</main></div></div><footer><div class="navbar navbar-default navbar-fixed-bottom"><div class="container"><div class="copyright"> © 2014 COUCHBASE All rights reserved. </div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>