<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server product documentation"><style>
					body{
						padding-top:40px; /* make the container go all the way to the bottom of the top bar */
					}</style><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"><script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container-fluid container"><a class="brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="brand" style="color:#000552;" href="/">Couchbase Documentation <small>beta</small></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></div></header><div id="content" class="container-fluid container"><div class="row-fluid"><nav class="span3"><div class="well"><ul class="nav nav-list"><li><a href="../beta-intro.html">Couchbase 3.0 beta introduction</a></li><li><a href="../Features/features.html">Couchbase 3.0 Features</a></li><li><a href="../install-intro.html">Couchbase Installation</a></li><li><a href="../admin-intro.html">Couchbase Administration</a><ul class="nav nav-list"><li><a href="../Misc/admin-basics.html">Administration basics</a></li><li><a href="../Concepts/concept-intro.html">Architecture and concepts</a></li><li><a href="../Concepts/bp-deployment-considerations.html">Deployment considerations</a></li><li><a href="../Tasks/cluster-management.html">Cluster management</a></li><li><a href="../Monitoring/monitor-intro.html">Monitoring</a></li><li><a href="../Views/views-intro.html">Views and indexes</a></li><li><a href="../XDCR/xdcr-intro.html">Cross Datacenter Replication (XDCR)</a></li><li><a href="../UI/ui-intro.html">Couchbase web console</a></li><li><a href="../Misc/faq.html">FAQs</a></li><li><a href="../Misc/sample-bucket-intro.html">Sample buckets</a></li><li><a href="../Misc/Trbl-intro.html">Troubleshooting</a><ul class="nav nav-list"><li><a href="../Misc/Trbl-commonErrors.html">Common errors</a></li><li><a href="../Misc/Trbl-generalTips.html">General tips</a></li><li class="active"><a href="../Misc/Trbl-logs.html">Logs and logging</a><ul class="nav nav-list"></ul></li><li><a href="../Misc/Trbl-issuesReport.html">Reporting issues</a></li><li><a href="../Misc/Trbl-beam-smp-issue.html">Beam.smp</a></li><li><a href="../Misc/Trbl-blockedIndexer.html">Blocked indexer</a></li><li><a href="../Misc/Trbl-common.html">Server issues</a></li><li><a href="../Misc/Trbl-datamissing-server.html">Incorrect or missing data (server issue)</a></li><li><a href="../Misc/Trbl-datamissing-user.html">Incorrect or missing data (user issue)</a></li><li><a href="../Misc/Trbl-designdocs.html">Design document aliases</a></li><li><a href="../Misc/Trbl-expireddocs.html">Expired documents issue</a></li><li><a href="../Misc/Trbl-indexFileSystem.html">Index filesystem structure</a></li><li><a href="../Misc/Trbl-queryResults.html">Index results for a single node</a></li><li><a href="../Misc/Trbl-replicaIndex.html">Debugging replica index</a></li><li><a href="../Misc/Trbl-staleFalse-debug.html">Debugging stale=false queries</a></li><li><a href="../Misc/Trbl-timeoutErrors.html">Timeout errors</a></li><li><a href="../Misc/Trbl-total_row-debug.html">total_rows values are too high</a></li><li><a href="../Misc/Trbl-wrongdocs.html">Wrong documents or rows issue</a></li></ul></li><li><a href="../Misc/deprecated.html">Misc/deprecated.dita</a></li></ul></li><li><a href="../cli-intro.html">Couchbase CLI</a></li><li><a href="../rest-intro.html">Couchbase REST API</a></li><li><a href="../rel-notes/rel-notes3.0beta.html">Release notes (beta)</a></li></ul></div></nav><main class="span9">
	<h1 class="title topictitle1">Logs and logging</h1>

	
	<div class="body"><p class="shortdesc">Couchbase Server creates a number of different log files depending on the component of
		the system that produce the error, and the level and severity of the problem being
		reported.</p>


		
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
				
				
				<thead class="thead" align="left">
					<tr class="row">
						<th class="entry" valign="top" id="d72803e27">Platform</th>

						<th class="entry" valign="top" id="d72803e30">Location</th>

					</tr>

				</thead>

				<tbody class="tbody">
					<tr class="row">
						<td class="entry" valign="top" headers="d72803e27 ">Linux</td>

						<td class="entry" valign="top" headers="d72803e30 "><samp class="ph codeph">/opt/couchbase/var/lib/couchbase/logs</samp></td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e27 ">Windows</td>

						<td class="entry" valign="top" headers="d72803e30 "><samp class="ph codeph">C:\Program
								Files\Couchbase\Server\var\lib\couchbase\logs</samp> Assumes
							default installation location</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e27 ">Mac OS X</td>

						<td class="entry" valign="top" headers="d72803e30 "><samp class="ph codeph">/Users/couchbase/Library/Application
								Support/Couchbase/var/lib/couchbase/logs </samp>
						</td>

					</tr>

				</tbody>

			</table>
</div>

		<p class="p">Individual log files are automatically numbered, with the number suffix incremented for
			each new log, with a maximum of 20 files per log. Individual log file sizes are limited
			to 10MB by default.</p>

		
		
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
				
				
				<thead class="thead" align="left">
					<tr class="row">
						<th class="entry" valign="top" id="d72803e87">File</th>

						<th class="entry" valign="top" id="d72803e90">Log Contents</th>

					</tr>

				</thead>

				<tbody class="tbody">
					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">couchdb</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Errors relating to the couchdb subsystem that supports views, indexes
							and related REST API issues</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">debug</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Debug level error messages related to the core server management
							subsystem, excluding information included in the
								<samp class="ph codeph">couchdb</samp>, <samp class="ph codeph">xdcr</samp> and
								<samp class="ph codeph">stats</samp> logs.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">info</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Information level error messages related to the core server
							management subsystem, excluding information included in the
								<samp class="ph codeph">couchdb</samp>, <samp class="ph codeph">xdcr</samp> and
								<samp class="ph codeph">stats</samp> logs.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">error</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Error level messages for all subsystems excluding
								<samp class="ph codeph">xdcr</samp>.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">xcdr_error</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">XDCR error messages.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">xdcr</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">XDCR information messages.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">mapreduce_errors</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">JavaScript and other view-processing errors are reported in this
							file.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">views</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Errors relating to the integration between the view system and the
							core server subsystem.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">stats</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Contains periodic reports of the core statistics.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" headers="d72803e87 "><samp class="ph codeph">memcached.log</samp></td>

						<td class="entry" valign="top" headers="d72803e90 ">Contains information relating to the core memcache component,
							including vBucket and replica and rebalance data streams requests.
						</td>

					</tr>

				</tbody>

			</table>
</div>

		<p class="p">Each log file group will also include a <samp class="ph codeph">.idx</samp> and <samp class="ph codeph">.siz</samp>
			file which holds meta information about the log file group. These files are
			automatically updated by the logging system.</p>

		
		
		<div class="section"><h2 class="title sectiontitle">Changing log file location</h2>
			<p class="p">The default file log location is
				/opt/couchbase/var/lib/couchbase/logs, however, if you want to change the default
				log location to a different directory, change the log file configuration option.
				</p>
<p class="p">Note</p>
<p class="p">To implement a log file location change (from the default), you
				must be log in as either root or sudo and the Couchbase service must be
				restarted.</p>
<p class="p">To change the log file configuration:</p>
<ol class="ol">
				<li class="li">Log in as root or sudo and navigate to the directory where you installed
					Couchbase. For example:
						<samp class="ph codeph">/opt/couchbase/etc/couchbase/static_config</samp></li>

				<li class="li">Edit the static_config file and change the <samp class="ph codeph">error_logger_mf_dir</samp>
					variable to a different directory. For example: <samp class="ph codeph">{error_logger_mf_dir,
						"/home/user/cb/opt/couchbase/var/lib/couchbase/logs"}</samp></li>

				<li class="li">Restart the Couchbase service. After restarting the Couchbase service, all
					subsequent logs will be in the new directory.</li>

			</ol>
</div>

		
		
		<div class="section"><h2 class="title sectiontitle">Changing logging levels</h2>
			
			<p class="p">The default logging level for all log
				files are set to debug except for couchdb, which is set to info. If you want to
				change the default logging level, modify the logging level configuration options.
				</p>
<p class="p">The configuration change can be performed in one of the following ways:</p>
<ul class="ul">
				<li class="li">persistent</li>

				<li class="li">dynamic (on the fly, without restarting).</li>

			</ul>
</div>

		
		
		<div class="section"><h2 class="title sectiontitle">Changing logging levels to be persistent</h2>
			<p class="p">Logging
					levels can be changed so that the changes are persistent, that is, the changes
					continue to be implemented should a Couchbase Server reboot
					occur.</p>

			
			<div class="note note"><span class="notetitle">Note:</span> To implement logging level changes, the Couchbase
					service must be restarted.</div>

			
			<p class="p">To change logging levels to be persistent:</p>

			
			<ol class="ol">
					<li class="li">Log in as root or sudo and navigate to the directory where you installed
						Couchbase. For example:
							<samp class="ph codeph">/opt/couchbase/etc/couchbase/static_config</samp></li>

					<li class="li">Edit the <strong class="ph b">static_config</strong> file and change the desired log component. For
						example, parameters with the <samp class="ph codeph">loglevel_</samp> prefix set the
						logging level.</li>

					<li class="li">Restart the Couchbase service.</li>

				</ol>

			
			<p class="p">After restarting the Couchbase service, logging levels for that component
					will be changed.</p>
</div>

		
		
		<div class="section"><h2 class="title sectiontitle">Changing logging levels dynamically</h2>
			
			<p class="p">If logging
					levels are changed dynamically and if a Couchbase server reboot occurs, then the
					changed logging levels revert to the default. </p>
<p class="p">To change logging levels
					dynamically, execute a curl POST command using the following syntax:</p>

			
			<pre class="pre codeblock">
curl -X POST -u adminName:adminPassword
  HOST:PORT/diag/eval 
  –d ‘ale:set_loglevel(&lt;log_component&gt;,&lt;logging_level&gt;).’
</pre>

					
						<p class="p">Where:</p>

					<dl class="dl">
					
						<dt class="dt dlterm">Log_component</dt>

						<dd class="dd">The default log level (except couchdb) is debug. For example, ns_server.
							The available loggers are ns_server, couchdb, user, Menelaus, ns_doctor,
							stats, rebalance, cluster, views, mapreduce_errors , xdcr and
							error_logger</dd>

					


					
						<dt class="dt dlterm">Logging_level</dt>

						<dd class="dd">The available log levels are debug, info, warning, and error.</dd>

					
					</dl>

		</div>


				<div class="example">
			<pre class="pre codeblock">
curl -X POST -u Administrator:password 
	http://127.0.0.1:8091/diag/eval 
	-d 'ale:set_loglevel(ns_server,error).
</pre>
</div>

		
	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Misc/Trbl-intro.html" title="Troubleshooting covers general tips, common errors, log information, and other issues.">Troubleshooting</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-fixed-bottom"><div class="navbar-inner"><div class="container-fluid container"><div class="copyright">
								© 2014 COUCHBASE All rights reserved.
							</div></div></div></div></footer></body></html>