<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Couchbase Server documentation"><title>Diagnostics with couchbase-cli</title><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css"><script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700" rel="stylesheet" type="text/css"><link href="/assets-dita/css/base.css" rel="stylesheet"><script src="/assets-dita/js/main.js"></script></head><body><header class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="http://www.couchbase.com/"><img src="/assets-dita/images/cb-icon-sofa.png" class="logo"></a><a class="navbar-brand" style="color:#000552;" href="/">Couchbase
								Documentation <small>beta</small></a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">Docs Home</a></li><li><a href="/archive-index">Docs Archive</a></li></ul></div></div></header><div id="content" class="container"><div class="row"><nav class="col-md-3"><div class="well"><ul class="nav nav-list list-group"><li><a href="../../Couchbase-intro.html">Introduction</a></li><li><a href="../../Whats-new-3.0.html">What's new in 3.0</a></li><li><a href="../../install-intro.html">Installation and upgrade</a></li><li><a href="../../admin-intro.html">Administration</a></li><li><a href="../../cli-intro.html">CLI reference</a><ul class="nav nav-list"><li><a href="../../CLI/cli-overview.html">CLI overview</a></li><li><a href="../../CLI/cbcli-intro.html">couchbase-cli tool</a><ul class="nav nav-list"><li><a href="../../CLI/CBcli/cbcli-commands.html">couchbase-cli commands</a></li><li><a href="../../CLI/CBcli/cbcli-rza.html">Rack-zone awareness</a></li><li><a href="../../CLI/CBcli/cbcli-buckets.html">Buckets</a></li><li><a href="../../CLI/CBcli/cbcli-servers.html">Server nodes</a></li><li><a href="../../CLI/CBcli/cbcli-xdcr.html">XDCR</a></li><li class="active"><a href="../../CLI/CBcli/cbcli-cluster-wide-info.html">Diagnostics with couchbase-cli</a><ul class="nav nav-list"></ul></li></ul></li><li><a href="../../CLI/cbanalyze-core_tool.html">cbanalyze-core tool</a></li><li><a href="../../CLI/cbbackup_tool.html">cbbackup tool</a></li><li><a href="../../CLI/cbcollect_info_tool.html">cbcollect_info tool</a></li><li><a href="../../CLI/cbdocloader_tool.html">cbdocloader tool</a></li><li><a href="../../CLI/cbepctl-intro.html">cbepctl tool</a></li><li><a href="../../CLI/cbhealthchecker_tool.html">cbhealthchecker tool</a></li><li><a href="../../CLI/cbreset_password_tool.html">cbreset_password tool</a></li><li><a href="../../CLI/cbrestore_tool.html">cbrestore tool</a></li><li><a href="../../CLI/cbstats-intro.html">cbstats tool</a></li><li><a href="../../CLI/cbtransfer_tool.html">cbtransfer tool</a></li><li><a href="../../CLI/cbworkloadgen_tool.html">cbworkloadgen tool</a></li></ul></li><li><a href="../../rest-intro.html">REST API reference</a></li><li><a href="../../rel-notes/rel-notes3.0.html">Release notes</a></li></ul></div></nav><main class="col-md-9"><div class="gcse-wrapper"><div class="gcse-search"></div></div>
	<h1 class="title topictitle1">Diagnostics with couchbase-cli</h1>

	
	<div class="body conbody"><p class="shortdesc">You can start, stop, and view status of a diagnostics collection by using the <samp class="ph codeph">couchbase-cli</samp> tool.</p>

		<div class="section"><h2 class="title sectiontitle">Start log collection command</h2>
			
			<p class="p">The start log collection command initiates a log collection process. You must specify
				whether to collect logs from all nodes or only specified nodes. You can optionally
				request the logs to be uploaded to Couchbase. If you request an upload to Couchbase, you
				must include the name of your organization and optionally a support ticket number. The
				command uses the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-start</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
				<span class="ph delim">{</span>
				<span class="keyword option">--nodes</span><span class="ph oper">=</span><span class="ph var">node1,node2,...</span>
				<span class="ph delim">|</span>
				<span class="keyword option">--all-nodes</span>
				<span class="ph delim">}</span> [--upload <span class="keyword option">--upload-host</span><span class="ph delim">=</span><span class="ph var">host</span>
				<span class="keyword option">--customer</span><span class="ph oper">=</span><span class="ph var">name</span>
					[<span class="keyword option">--ticket</span><span class="ph oper">=</span><span class="ph var">ticketNumber</span> ] ] </span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Stop log collection command</h2>
			
			<p class="p">The stop log collection command cancels collection on each node. It uses the following
				syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-stop</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Report log collection status command</h2>
			
			<p class="p">The report log collection status command returns information about each node. It uses
				the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-status</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 
				<span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/cbcli-intro.html">couchbase-cli tool</a></div>
</div>
</div></main></div></div><footer><div class="navbar navbar-default navbar-fixed-bottom"><div class="container"><div class="copyright"> Â© 2014 COUCHBASE All rights reserved. </div></div></div></footer><script type="text/javascript" src="https://www.google.com/jsapi"></script><script>
					(function() {
					var cx = '018016427239405524608:fkg1v30apnm';
					var gcse = document.createElement('script');
					gcse.type = 'text/javascript';
					gcse.async = true;
					gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					'//www.google.com/cse/cse.js?cx=' + cx;
					var s = document.getElementsByTagName('script')[0];
					s.parentNode.insertBefore(gcse, s);
					})();
				</script></body></html>